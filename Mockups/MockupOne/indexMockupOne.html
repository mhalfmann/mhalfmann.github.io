<!doctype HTML>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1"> -->
<!-- <script src="./Javascript/aframe.min.js"></script> -->
<!-- <script src="./Javascript/aframe-ar.js"></script> -->
<script src="../../Javascript/hammer.js"></script>
<script src="../../Javascript/TweenMax.min.js"></script>
<script src="../../Javascript/jquery-3.4.0.min.js"></script>
<link rel="stylesheet" type="text/css" href="../../css/ui.css">
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
<style>
  a, a:visited { 
      text-decoration: none; 
      color: white;
      }
    
  .uiButtonFrame{
  }
  .uiDialogueElement{
    margin: 10px;
  }
  input[type=number]::-webkit-inner-spin-button {
    opacity: 1
  }
  img {
    max-width: 100%;
    max-height: 100%;
  }

</style>
<!-- <script src="./Javascript/jquery-3.4.0.min.js"></script> -->
<!-- <script src="./Javascript/TweenMax.min.js"></script> -->
  <!-- <body onselectstart = 'return false' style='margin : 0px; overflow: hidden; background:  rgb(255, 134, 48); font-family: "Open Sans";'>    
  <div style="position: absolute; left: 0px; top: 0%;height: 7vh; width:100%; background: rgb(255, 105, 0); text-align: center; color: white; font-size: 5vh; margin-bottom: 50px;">Applikationen</div> -->
  <body onresize="resizeWin()" onselectstart = 'return false' style='margin : 0px; overflow: hidden; background:  rgb(82, 82, 82); font-family: "Open Sans";'>    
    <!-- <div id ="header" style="position: absolute; left: 0px; top: 0%;height: 50px; width:100%; background: rgb(24, 24, 24); text-align: center; color: white; font-size: 35px; margin-bottom: 50px;"> -->
    

  <!-- <div id="main" style ="position: absolute; left: 0px; top: 50px; z-index: 1; height: 93vh; width:100%; background: red; overflow: auto; padding-top: 5vh;"> -->
  <div id="main" style ="position: absolute; top: 0px; left: 0px; z-index: 1; height: 100%; width:100%; background: rgb(247, 228, 204); overflow: hidden;">
    
    <div id ="header" style="position: absolute; left: 0px; top:0px; height: 50px; width:100%; background: rgb(24, 24, 24); text-align: center; color: white; font-size: 35px; margin-bottom: 50px;">
      Patient 0815  
    </div>
    
    <div id="visite" onclick = "layerClicked(this)" style="position: absolute; left: 0px; top: 50px; z-index: 2; height: 100%; width:100%; background: lightgray; overflow: hidden;" fullscreen="on">
      <img id="imgVisite" src="../Assets/Images/Visite.png" style="width: 100%; height: 100%;">
      
      <div id="fullscreenButton" onclick = "fullscreenClicked(this)" style="position: absolute; top:10px; right: 100px; width: 50px; background: darkcyan; border-radius: 50%; box-shadow: 5px 5px 5px rgb(58, 58, 58);">
        <img id="imgVisite" src="../../Assets/Icons/fullscreen_exit.png" style="width: 100%; height: 100%;">
      </div>

    </div>
    
    <div id="tumor" onclick = "layerClicked(this)" style="position: absolute; left: 0px; top: 50px; z-index: 2; height: 100%; width:100%; background: lightgray; overflow: hidden;" fullscreen="on">
      <img id="imgTumor" src="../Assets/Images/Tumor.PNG" style="width: 100%; height: 100%;">
      
      <div id="fullscreenButton" onclick = "fullscreenClicked(this)" style="position: absolute; top:10px; right: 100px; width: 50px; background: darkcyan; border-radius: 50%; box-shadow: 5px 5px 5px rgb(58, 58, 58);">
        <img id="imgVisite" src="../../Assets/Icons/fullscreen_exit.png" style="width: 100%; height: 100%;">
      </div>

    </div>
    
    <div id="patient" onclick = "layerClicked(this)" style="position: absolute; left: 0px; top: 50px; z-index: 2; height: 100%; width:100%; background: lightgray; overflow: hidden;" fullscreen="on">

      <div id="fullscreenButton" onclick = "fullscreenClicked(this)" style="position: absolute; top:10px; right: 100px; width: 50px; background: darkcyan; border-radius: 50%; box-shadow: 5px 5px 5px rgb(58, 58, 58);">
        <img id="imgVisite" src="../../Assets/Icons/fullscreen_exit.png" style="width: 100%; height: 100%;">
      </div>

    </div>
    
    <div id="modeSelectButton" style = "position: absolute; bottom: 10px; right: 10px; z-index: 10; width: 50px; height: 50px; border-radius: 50%; background: darkcyan; box-shadow: 5px 5px 5px  rgb(58, 58, 58); margin: 10px">
      <img src="../../Assets/Icons/layers.png"> 
    </div>
    
    <div id="modeMenu" style = "position: absolute; bottom: 70px; right: 10px;z-index: 10; background: none;">
      <div id="modeTumor" style = "z-index: 10; width: 50px; height: 50px; border-radius: 50%; background: lightskyblue; text-align: center; color: white; box-shadow: 5px 5px 5px  rgb(58, 58, 58); margin: 10px;">
        <img src="../../Assets/Icons/gene.png"> 
      </div>
      <div id="modeVisite" style = "z-index: 10; width: 50px; height: 50px; border-radius: 50%; background: lightskyblue; text-align: center; color: white; box-shadow: 5px 5px 5px  rgb(58, 58, 58); margin: 10px;">
        <img src="../../Assets/Icons/visite.png" style="width: 90%; height: 90%;"> 
      </div>
      <div id="modePatient" style = "z-index: 10; width: 50px; height: 50px; border-radius: 50%; background: lightskyblue; text-align: center; color: white; box-shadow: 5px 5px 5px  rgb(58, 58, 58); margin: 10px;">
        <img src="../../Assets/Icons/info.png"> 
      </div>
    </div>
  </div>

   </body>
    <script>
      var currentLink = "";
      document.oncontextmenu = function() {
        return false;
      }
      var topLayerIndex = 2;
      
      document.getElementById("tumor").style.height = (window.innerHeight-50)+"px"
      document.getElementById("patient").style.height = (window.innerHeight-50)+"px"
      document.getElementById("visite").style.height = (window.innerHeight-50)+"px"
      $( "#modeMenu" ).hide()

      function resizeWin(){
        /*console.log(window.innerHeight)
        document.getElementById("tumor").style.height = (window.innerHeight-50)+"px"
        document.getElementById("patient").style.height = (window.innerHeight-50)+"px"
        document.getElementById("visite").style.height = (window.innerHeight-50)+"px"*/
      }

      document.getElementById("modeSelectButton").addEventListener("click",()=>{
        console.log("selecting mode")
        // document.getElementById("modeMenu").style.visibility ="visible"
        $( "#modeMenu" ).toggle()
      })

      document.getElementById("modeTumor").addEventListener("click",()=>{
        console.log("selecting Tumor")
        bringToFront(document.getElementById("tumor"))
        $( "#modeMenu" ).hide()
      })

      document.getElementById("modeVisite").addEventListener("click",()=>{
        console.log("selecting Visite")
        bringToFront(document.getElementById("visite"))
        $( "#modeMenu" ).hide()
      })

      document.getElementById("modePatient").addEventListener("click",()=>{
        console.log("selecting Patient")
        bringToFront(document.getElementById("patient"))
        $( "#modeMenu" ).hide()
      })

      function layerClicked(element){
        console.log(element.getAttribute("fullscreen"))
        bringToFront(element)
      }

      function bringToFront(element){
        topLayerIndex++
        element.style.zIndex =topLayerIndex
        document.getElementById("modeSelectButton").style.zIndex =topLayerIndex+1
        document.getElementById("modeMenu").style.zIndex =topLayerIndex+1

      }

      function fullscreenClicked(element){
        console.log(element.parentNode)
        switch(element.childNodes[1].src.toString().indexOf("exit")>0){
          case false: //layer mimized, bring to fullscreen
            element.childNodes[1].src = "../../Assets/Icons/fullscreen_exit.png"
            element.parentNode.setAttribute("fullscreen","on")
            bringToFront(element.parentNode)
            TweenMax.to(element.parentNode, 0.1, {scale:1})
            TweenMax.to(element.parentNode, 0.1, {css: {top: 50, left: 0}})
            break
          case true: //layer maximized, exit fullscreen
            element.childNodes[1].src = "../../Assets/Icons/fullscreen.png"
            element.parentNode.setAttribute("fullscreen","off")
            element.parentNode.style.boxShadow = "5px 5px 5px  rgb(58, 58, 58)";
            TweenMax.to(element.parentNode, 0.1, {scale:0.7, onComplete:function(){
            }})
            break

        }
        // console.log( element.childNodes[1].src.toString().indexOf("exit"))
          
      }
      
      dragElement(document.getElementById("visite"))
      dragElement(document.getElementById("tumor"))
      dragElement(document.getElementById("patient"))

            /*document.getElementById("listButton").addEventListener("click",()=>{
                $( "#list" ).toggle();
            })*/

      document.body.addEventListener('click',(event)=>{
        console.log("clicked body",event.target.id)
        if(event.target.id!="listIcon")$( "#list" ).hide()
        // if(!event.target.className.includes("ui"))document.getElementById("select").style.visibility = "hidden"
      })

      function clicked(element){
        TweenMax.to(element, 0.1, {scale:1.1, onComplete:function(){
          TweenMax.to(element, 0.1, {scale:1.0, onComplete:function(){
            // location = "./Apps/Unwetter/index.html"
          }})
        }})
      }

      function dragElement(elmnt) {
        var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
        if (document.getElementById(elmnt.id + "header")) {
          // if present, the header is where you move the DIV from:
          document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
        } else {
          // otherwise, move the DIV from anywhere inside the DIV:
          elmnt.onmousedown = dragMouseDown;
        }

        function dragMouseDown(e) {
          e = e || window.event;
          e.preventDefault();
          // get the mouse cursor position at startup:
          pos3 = e.clientX;
          pos4 = e.clientY;
          document.onmouseup = closeDragElement;
          // call a function whenever the cursor moves:
          document.onmousemove = elementDrag;
          bringToFront(elmnt)
        }

        function elementDrag(e) {
          if(elmnt.getAttribute("fullscreen")=="off"){
            e = e || window.event;
            e.preventDefault();
            // calculate the new cursor position:
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            // set the element's new position:
            elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
            elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
          }
        }

        function closeDragElement() {
          // stop moving when mouse button is released:
          document.onmouseup = null;
          document.onmousemove = null;
        }
      }
      
      $( ".uiButtonFrame" ).on( "pointerenter", function() {
        // console.log( this)
        $( this ).find(".uiButtonBackground").css("box-shadow", "15px 15px 5px rgba(2, 2, 2, 0.308)")
        $( this ).css("transform", "scale(1.1)")
        // $( this ).find(".uiButtonBackground").css("transform", "scale(1.1)")
        // $( this ).find(".uiText").css("transform", "scale(1.1)")
        $( this ).css("text-shadow"," 8px 8px 5px rgba(2, 2, 2, 0.308)")
      })

      $( ".uiButtonFrame" ).on( "pointerleave", function() {
        // console.log( this)
        $( this ).find(".uiButtonBackground").css("box-shadow", "10px 10px 5px rgba(2, 2, 2, 0.308)")
        $( this ).css("transform", "scale(1.0)")
        // $( this ).find(".uiButtonBackground").css("transform", "scale(1.0)")
        // $( this ).find(".uiText").css("transform", "scale(1.0)")
        $( this ).css("text-shadow"," 5px 5px 5px rgba(2, 2, 2, 0.308)")
      })

      /*function openDialogue(element){
        console.log(event.clientX,event.clientY)
        // if(document.getElementById("select").style.visibility == "hidden"){
          document.getElementById("select").style.visibility = "visible"
          document.getElementById("select").style.top = event.clientY+"px"
          document.getElementById("select").style.left = event.clientX+"px"
        // }

        currentLink =element.parentElement.getAttribute("href")
        document.getElementById("szene").setAttribute("max",element.getAttribute("n"))
        TweenMax.to(element, 0.1, {scale:1.1, onComplete:function(){
          TweenMax.to(element, 0.1, {scale:1.0, onComplete:function(){
          }})
        }})
      }
      function openLink(link){
        var s = document.getElementById("szene").value
        console.log(s)
        switch (currentLink.includes("?")){
          case true:
            currentLink +=s
            break
          case false:
            currentLink +="?"+s
            break
          
        }
        location = currentLink
        document.getElementById("szene").value = 0
        // document.getElementById("select").style.visibility = "visible"
      }*/
      

    function gotoPage(element){
        location = element.getAttribute("href")
    }

    function hover(element){
      console.log("Hovering",element)
    }

    // document.getElementById('pdf').addEventListener('click',(e)=>{
    //   e.stopPropagation()
    //   TweenMax.to(e.target, 0.1, {scale:1.1, onComplete:function(){
    //     TweenMax.to(e.target, 0.1, {scale:1.0, onComplete:function(){
    //       // location = "./Apps/TestMolekuele/assets/marker/Marker.pdf?target=_blank"
    //     }})
    //   }})
    // })
      </script>
  </script>
</html>