<!doctype HTML>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1"> -->
<!-- <script src="./Javascript/aframe.min.js"></script> -->
<!-- <script src="./Javascript/aframe-ar.js"></script> -->
<script src="../../Javascript/hammer.js"></script>
<script src="../../Javascript/TweenMax.min.js"></script>
<script src="../../Javascript/jquery-3.4.0.min.js"></script>
<link rel="stylesheet" type="text/css" href="../../css/ui.css">
<link rel="stylesheet" type="text/css" href="../../css/slider.css">
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
<style>

  a, a:visited { 
    text-decoration: none; 
    color: white;
  }
    
  .uiButtonFrame{
  }

  .uiDialogueElement{
    margin: 10px;
  }

  /* input[type=number]::-webkit-inner-spin-button {
    opacity: 1
  } */

  img {
    max-width: 100%;
    max-height: 100%;
  }

  .moveArea{
    position: absolute;
    background: chartreuse;
    opacity: 0;
    pointer-events: none;
  }
  
  .area{
    position: absolute;
    background: rgb(79, 79, 79);
    opacity: 1;
  }

  .card{
    position: absolute;
    background: darkcyan;
    padding: 20px; 
    border-radius: 10px;
    opacity: 1;
    box-shadow: 0px 0px 15px 5px  rgb(58, 58, 58);
  }

  .layer{
    position: absolute;
    left: 0px;
    top: 0px;
    z-index: 2;
    height: 100%;
    width:100%;
    border: solid 1px white;
    background: lightgray;
    overflow: hidden;
    box-shadow: 0px 0px 15px 5px  rgb(58, 58, 58);
  }

  .source{
    position: absolute;
    left: 100px;
    top: 100px;
    z-index: 2;
    height: 50%;
    /* width:50%; */
    border: solid 1px white;
    background: darkolivegreen;
    overflow: hidden;
    box-shadow: 0px 0px 15px 5px rgb(58, 58, 58);
  }

  .contextMenu{
    position: absolute;
    left: 100px;
    top: 100px;
    z-index: 2;
    /* height: 25vh; */
    /* width:15vh; */
    border-radius: 10px;
    /* border: solid 1px white; */
    background: darkcyan;
    /* overflow: hidden; */
    box-shadow: 0px 0px 15px 5px rgb(58, 58, 58);
  }

  .contextMenu2{
    position: absolute;
    left: 100px;
    top: 100px;
    z-index: 2;
    /* height: 25vh; */
    /* width:15vh; */
    border-radius: 50%;
    /* border: solid 1px white; */
    background: darkcyan;
    /* overflow: hidden; */
    box-shadow: 5px 5px 5px rgb(58, 58, 58);
  }

  .gene_button{
    position: absolute;
    height: 4.5%;
    width:100%;
    z-index: 2;
    opacity: 1;
    background: none;
    overflow: hidden;
  }

  .document_button{
    position: absolute;
    height: 35%;
    width:5%;
    z-index: 2;
    opacity: 1;
    /* background: purple; */
    overflow: hidden;
  }

  .button{
    position: absolute;
    width: 50px;
    z-index: 300000;
    background: darkcyan;
    opacity: 1;
    border-radius: 50%;
    box-shadow: 5px 5px 5px rgb(58, 58, 58);
  }
  
  .buttonFlat{
    position: absolute;
    width: 5%;
    height: 5%;
    z-index: 300000;
    background: darkgray;
    opacity: 0.1;
    /* border-radius: 50%; */
    border: 1px solid white;
    /* box-shadow: 5px 5px 5px rgb(58, 58, 58); */
  }

  .buttonFlat2{
    position: absolute;
    width: 40px;
    height: 40px;
    z-index: 300000;
    background: darkgray;
    opacity: 0.7;
    /* border-radius: 50%; */
    border: 1px solid white;
    /* box-shadow: 5px 5px 5px rgb(58, 58, 58); */
  }

  .buttonSubmenu{
    position: absolute;
    width: 50px;
    height: 50px;
    z-index: 300000;
    margin: 10px;
    padding: 5px;
    background:  rgb(113, 228, 228);
    opacity: 1;
    border-radius: 50%;
    box-shadow: 5px 5px 5px rgb(58, 58, 58);
  }

  .contextMenuItem{
    width: 50px;
    height: 50px;
    z-index: 300000;
    margin: 10px;
    padding: 5px;
    background: rgb(113, 228, 228);
    opacity: 1;
    border-radius: 50%;
    /* box-shadow: 5px 5px 5px rgb(58, 58, 58); */
  }

  .contextMenuItem2{
    width: 50px;
    height: 50px;
    z-index: 300000;
    /* margin: 10px; */
    /* padding: 5px; */
    background: rgb(113, 228, 228);
    opacity: 1;
    border-radius: 50%;
    box-shadow: 5px 5px 5px rgb(58, 58, 58);
  }

  .buttonResize{
    position: absolute;
    width: 40px;
    height: 40px;
    bottom: 0px;
    right: 0px;
    z-index: 3000000;
    /* margin: 10px; */
    background: darkgray;
    opacity: 0.1;
    border: 1px solid white;
    /* border-radius: 50%; */
    /* box-shadow: 5px 5px 5px rgb(58, 58, 58); */
  }

  .infoItem {
    /* pointer-events: none; */
    background: cornsilk;
    padding: 5px;
    margin: 5px;
    display: flex;
    flex-direction: row;
  }
  
  .infoCategory{
    font-weight: bold;
    padding-right: 5px;
  }

  .infoEntry{
    
  }

  .buttonFlat2:hover,.button:hover,.buttonResize:hover{
    opacity: 1;
  }

  .buttonSubmenu:hover,.contextMenuItem:hover,.contextMenuItem2:hover{
    background: paleturquoise;
    transform: scale(1.1);
  }
  
  .buttonFlat:hover{
    opacity: 0.9;
  }

</style>
<!-- <script src="./Javascript/jquery-3.4.0.min.js"></script> -->
<!-- <script src="./Javascript/TweenMax.min.js"></script> -->
  <!-- <body onselectstart = 'return false' style='margin : 0px; overflow: hidden; background:  rgb(255, 134, 48); font-family: "Open Sans";'>    
  <div style="position: absolute; left: 0px; top: 0%;height: 7vh; width:100%; background: rgb(255, 105, 0); text-align: center; color: white; font-size: 5vh; margin-bottom: 50px;">Applikationen</div> -->
  <body onresize="resizeWin()" onselectstart = "cancelSelect(event,this)" style='margin : 0px; overflow: hidden; background:  rgb(82, 82, 82); font-family: "Open Sans";'>    
  <!-- <body onresize="resizeWin()" style='margin : 0px; overflow: hidden; background:  rgb(82, 82, 82); font-family: "Open Sans";'>     -->
    <!-- <div id ="header" style="position: absolute; left: 0px; top: 0%;height: 50px; width:100%; background: rgb(24, 24, 24); text-align: center; color: white; font-size: 35px; margin-bottom: 50px;"> -->
    
      <!-- <p id="test" contentEditable="true" style="position: absolute; top: 200px; left: 500px; background: darkkhaki; z-index: 1000; font-size: 50px;"> Test</p> -->

  <!-- <div id="main" style ="position: absolute; left: 0px; top: 50px; z-index: 1; height: 93vh; width:100%; background: red; overflow: auto; padding-top: 5vh;"> -->
  <div id="main" style ="position: absolute; top: 0px; left: 0px; z-index: 1; height: 100%; width:100%; background: rgb(179, 244, 247); overflow: hidden;">

    <div id ="header" style="position: absolute; left: 0px; top:0px; height: 50px; width:100%; background: rgb(24, 24, 24); text-align: center; color: white; font-size: 35px; margin-bottom: 50px; z-index: 999999;">
      Patient 0815  
    </div>
    <div id ="explorationArea" style="position: absolute; left: 0px; top:50px; height: 100%; width:100%; background: rgb(128, 128, 128);z-index: 1;">
   

      <div id="leftArea" class="moveArea" style="left:0px; top: 0px; height: 100%; width: 10%;"></div>
      <div id="rightArea" class="moveArea" style="right:0px; top: 0px; height: 100%; width: 10%; background: chocolate;"></div>
      <div id="topArea" class="moveArea" style="left:10%; top: 0px; height: 10%; width: 70%; background: cornflowerblue;"></div>
      <div id="bottomArea" class="moveArea" style="left:10%; bottom: 0px; height: 10%; width: 80%; background: darkgreen;" ></div>
      
      <div id = "geneArea" class = "area draggable" pinned="true" style="top: 0px; right: 0%; height: 100%; width: 10%;">
        <img src="../Assets/Images/geneList.png" alt="" style="pointer-events: none;">
        <div id="genefake" style="position: absolute; right: 0%; bottom: 18%; height: 30%; width: 100%; background: rgb(79, 79, 79);"></div>
        <div id="genefake" style="position: absolute; right: 0%; bottom: 4.5%; height: 13.5%; width: 100%; background: rgba(79, 79, 79);"></div>
      
        <div id="arid1b_button" class="gene_button" onclick = "openGeneSources(this)" active="false" af="10" style="right: 0%; bottom: 36%;">
          <img src="../Assets/Images/arid1b_button.png" alt="" style="width: 100%; height: 100%;">
        </div>
        <div id="srms_button" class="gene_button" onclick = "openGeneSources(this)" active="false" af="20" style="right: 0%; bottom: 30%;">
          <img src="../Assets/Images/srms_button.png" alt="" style="width: 100%; height: 100%;">
        </div>
        <div id="zdhhc13_button" class="gene_button" onclick = "openGeneSources(this)" active="false" af="30" style="right: 0%; bottom: 24%;">
          <img src="../Assets/Images/zdhhc13_button.png" alt="" style="width: 100%; height: 100%;">
        </div>

        <div id="closeGene" class="buttonSubmenu" onclick = "toggleArea(event,this)" style = "bottom: 10%; left: -60px;" area="geneArea">
          <img id="geneIcon" src="../../Assets/Icons/close.png"> 
        </div>

        <div id="rotateGene" class="buttonSubmenu" onclick = "rotateArea(event,this)" style = "bottom: 20%; left: -60px;" area="geneArea">
          <img id="geneIcon" src="../../Assets/Icons/autorenew.png" style="width: 100%; height: 100%;"> 
        </div>

        <div id="pinGene" class="buttonSubmenu" onclick = "pinArea(event,this)" style = "bottom: 30%; left:-60px;" area="geneArea">
          <img id="geneIcon" src="../../Assets/Icons/pinned.png" style="width: 80%; height: 80%; margin: 10%;"> 
        </div>

        <img src="../Assets/Images/sorting.png" alt="" style="position: absolute; left: 0%; bottom: 20%; width: 100%; ">
        <img src="../Assets/Images/filtering.png" alt="" style="position: absolute; left: 0%; bottom: 15%; width: 100%;">
        
        <div class="slidecontainer" style="position: absolute; bottom: 4.5%; right: 0px; background: none;">
          <input type="range" min="1" max="100" value="50" class="slider" id="allelSlider">
          <p id ="sliderLabel" style="color: white; font-size: 12px; margin: 10px;">Allelfrequenz:</p>
        </div>

      </div>

      <div id = "visiteArea" class = "area draggable" pinned="true" style="bottom: 0px; left: 0%; height: 15%; width: 90%; background: rgb(197, 84, 84);">
        <img src="../Assets/Images/Timeline.png" width="100%" alt="" style="pointer-events: none;">
        
        <div id="document_text_button" class="document_button" onclick = "openDocument(event,this)"  active="false" style="left: 32%; bottom: 40%;">
        </div>
        <div id="document_img_button" class="document_button" onclick = "openDocument(event,this)"  active="false" style="right: 21.7%; bottom: 55%;">
        </div>
       
        <div id="closeVisite" class="buttonSubmenu" onclick = "toggleArea(event,this)" style = "left: 0px; top:-60px;" area="visiteArea">
          <img id="visiteIcon" src="../../Assets/Icons/close.png" style="width: 100%; height: 100%;"> 
        </div>
        
        <div id="rotateVisite" class="buttonSubmenu" onclick = "rotateArea(event,this)" style = "left: 100px; top:-60px;" area="visiteArea">
          <img id="visiteIcon" src="../../Assets/Icons/autorenew.png" style="width: 100%; height: 100%;"> 
        </div>

        <div id="pinVisite" class="buttonSubmenu" onclick = "pinArea(event,this)" style = "left: 200px; top:-60px;" area="visiteArea">
          <img id="visiteIcon" src="../../Assets/Icons/pinned.png" style="width: 80%; height: 80%; margin: 10%;"> 
        </div>
      </div>

      <div id = "infoArea" class = "card draggable" style="bottom: 20%; left: 20%; ">

        <div style="background: rgb(64, 88, 88); padding: 5px;">

          <div class="infoItem">
            <div class="infoCategory">
              Vorname:
            </div>
            <div class="infoEntry" contentEditable="true">
              Rainer
            </div>
          </div>
          <div class="infoItem">
            <div class="infoCategory">
              Nachname:
            </div>
            <div class="infoEntry" contentEditable="true">
              Zufall
            </div>
          </div>
          <div class="infoItem">
            <div class="infoCategory">
              Alter:
            </div>
            <div class="infoEntry" contentEditable="true">
              61
            </div>
          </div>
          <div class="infoItem">
            <div class="infoCategory">
              Geschlecht:
            </div>
            <div class="infoEntry" contentEditable="true">
              m&aumlnnlich
            </div>
          </div>
        </div>

        <div id="closeInfo" class="buttonSubmenu" onclick = "toggleArea(event,this)" style = "left: 0px; top:-60px;" area="infoArea">
          <img id="infoIcon" src="../../Assets/Icons/close.png" style="width: 100%; height: 100%;"> 
        </div>
      </div>

      <div id="document_text" class="source draggable" allowDrag="on" scale="1" style="width: 21%;">
        <img src="../Assets/Images/document.png" alt="" style="pointer-events: none; height: 100%; width: 100%;">
        <div id="resizeButtonDocument" class="buttonResize">
          <img src="../../Assets/Icons/resize.png" style="width: 100%; height: 100%;" alt="">
        </div>
        <div id="fullscreenButtonDoc" class="buttonFlat2" onclick = "fullscreenClicked(event,this)" style="top:5px; right: 5px;">
          <img id="imgVisite" src="../../Assets/Icons/fullscreen.png" style="width: 100%; height: 100%;">
        </div>
        <div id="minimizeButtonDoc" class="buttonFlat2" onclick = "minimizedClicked(event,this)" style="top:5px; right: 60px;">
          <img id="imgVisite" src="../../Assets/Icons/fullscreen_exit.png" style="width: 100%; height: 100%;">
        </div>
        <div id="closeButtonDoc" class="buttonFlat2" onclick = "closeClicked(event,this)" type = "doc" style="top:5px; right: 115px;">
          <img src="../../Assets/Icons/close.png" style="width: 100%; height: 100%;">
        </div>
      </div>

      <div id="document_img" class="source draggable" allowDrag="on" scale="1" style="width: 30%;">
        <img src="../Assets/Images/document2.png" alt="" style="pointer-events: none; height: 100%; width: 100%;">
        <div id="resizeButtonImg" class="buttonResize">
          <img src="../../Assets/Icons/resize.png" style="width: 100%; height: 100%;" alt="">
        </div>
        <div id="fullscreenButtonImg" class="buttonFlat2" onclick = "fullscreenClicked(event,this)" style="top:5px; right: 5px;">
          <img id="imgVisite" src="../../Assets/Icons/fullscreen.png" style="width: 100%; height: 100%;">
        </div>
        <div id="minimizeButtonImg" class="buttonFlat2" onclick = "minimizedClicked(event,this)" style="top:5px; right: 60px;">
          <img id="imgVisite" src="../../Assets/Icons/fullscreen_exit.png" style="width: 100%; height: 100%;">
        </div>
        <div id="closeButtonImg" class="buttonFlat2" onclick = "closeClicked(event,this)" type = "doc" style="top:5px; right: 115px;">
          <img src="../../Assets/Icons/close.png" style="width: 100%; height: 100%;">
        </div>
      </div>

      <div id="document_pubmed" class="source draggable" allowDrag="on" scale="1" style="width: 30%;">
        <img src="../Assets/Images/pubmed.png" alt="" style="pointer-events: none; height: 100%; width: 100%;">
        <div id="resizeButtonPubmed" class="buttonResize">
          <img src="../../Assets/Icons/resize.png" style="width: 100%; height: 100%;" alt="">
        </div>
        <div id="fullscreenButtonPubmed" class="buttonFlat2" onclick = "fullscreenClicked(event,this)" style="top:5px; right: 5px;">
          <img id="imgVisite" src="../../Assets/Icons/fullscreen.png" style="width: 100%; height: 100%;">
        </div>
        <div id="minimizeButtonPubmed" class="buttonFlat2" onclick = "minimizedClicked(event,this)" style="top:5px; right: 60px;">
          <img id="imgVisite" src="../../Assets/Icons/fullscreen_exit.png" style="width: 100%; height: 100%;">
        </div>
        <div id="closeButtonPubmed" class="buttonFlat2" onclick = "closeClicked(event,this)" type = "doc" style="top:5px; right: 115px;">
          <img src="../../Assets/Icons/close.png" style="width: 100%; height: 100%;">
        </div>
      </div>
      
      <div id="arid1b_sources" class="source draggable" allowDrag="on" scale="1" style="width: 50%;">
        <img id="aridIMG" src="../Assets/Images/arid1b.png" alt="" style="height: 100%; width: 100%; pointer-events: none;">
        <div id="resizeButtonArid" class="buttonResize">
          <img src="../../Assets/Icons/resize.png" style="width: 100%; height: 100%;" alt="">
        </div>
        <div id="fullscreenButtonArid" class="buttonFlat2" onclick = "fullscreenClicked(event,this)" style="top:5px; right: 5px;">
          <img src="../../Assets/Icons/fullscreen.png" style="width: 100%; height: 100%;">
        </div>
        <div id="minimizeButtonArid" class="buttonFlat2" onclick = "minimizedClicked(event,this)" style="top:5px; right: 60px;">
          <img src="../../Assets/Icons/fullscreen_exit.png" style="width: 100%; height: 100%;">
        </div>
        <div id="closeButtonArid" class="buttonFlat2" onclick = "closeClicked(event,this)" type = "gene" button="arid1b_button" style="top:5px; right: 115px;">
          <img src="../../Assets/Icons/close.png" style="width: 100%; height: 100%;">
        </div>
        <div id="expandPubmedButton" class="buttonFlat2" onclick = "expandPubmed(event,this)" type = "gene" button="arid1b_button" style="bottom:0%; right: 30%; visibility: hidden;">
          <img src="../../Assets/Icons/launch.png" style="width: 100%; height: 100%;">
        </div>
        <div id="buttonPubmed" onclick = "switchPubmed(event,this)" type = "gene" button="arid1b_button" style="position: absolute; background: chartreuse; top:0%; left: 63%; width: 7%; height: 100%; opacity: 0;"></div>
        <div id="buttonSumary" onclick = "switchSummary(event,this)" type = "gene" button="arid1b_button" style="position: absolute; background: cornflowerblue; top:0%; left: 0%; width: 7%; height: 100%; opacity: 0;"></div>
      </div>

      <div id="srms_sources" class="source draggable" allowDrag="on" scale="1" style="width: 50%;">
        <img src="../Assets/Images/srms.png" alt="" style="height: 100%; width: 100%; pointer-events: none;">
        <div id="resizeButtonSrms" class="buttonResize">
          <img src="../../Assets/Icons/resize.png" style="width: 100%; height: 100%;" alt="">
        </div>
        <div id="fullscreenButtonSrms" class="buttonFlat2" onclick = "fullscreenClicked(event,this)" style="top:5px; right: 5px;">
          <img src="../../Assets/Icons/fullscreen.png" style="width: 100%; height: 100%;">
        </div>
        <div id="minimizeButtonSrms" class="buttonFlat2" onclick = "minimizedClicked(event,this)" style="top:5px; right: 60px;">
          <img src="../../Assets/Icons/fullscreen_exit.png" style="width: 100%; height: 100%;">
        </div>
        <div id="closeButtonSrms" class="buttonFlat2" onclick = "closeClicked(event,this)" type = "gene" button="srms_button" style="top:5px; right: 115px;">
          <img src="../../Assets/Icons/close.png" style="width: 100%; height: 100%;">
        </div>
      </div>

      <div id="zdhhc13_sources" class="source draggable" allowDrag="on" scale="1" style="width: 50%;">
        <img src="../Assets/Images/zdhhc13.png" alt="" style="height: 100%; width: 100%; pointer-events: none;">
        <div id="resizeButtonZdhh" class="buttonResize">
          <img src="../../Assets/Icons/resize.png" style="width: 100%; height: 100%;" alt="">
        </div>
        <div id="fullscreenButtonZdhh" class="buttonFlat2" onclick = "fullscreenClicked(event,this)" style="top:5px; right: 5px;">
          <img src="../../Assets/Icons/fullscreen.png" style="width: 100%; height: 100%;">
        </div>
        <div id="minimizeButtonZdhh" class="buttonFlat2" onclick = "minimizedClicked(event,this)" style="top:5px; right: 60px;">
          <img src="../../Assets/Icons/fullscreen_exit.png" style="width: 100%; height: 100%;">
        </div>
        <div id="closeButtonZdhh" class="buttonFlat2" onclick = "closeClicked(event,this)" type = "gene" button="zdhhc13_button" style="top:5px; right: 115px;">
          <img src="../../Assets/Icons/close.png" style="width: 100%; height: 100%;">
        </div>
      </div>
      
          
      <!-- <div id="patient" class="layer" onpointerup="placeLayer(this)" onclick = "layerClicked(this)" style="" fullscreen="on" allowDrag="off" positionTest="none" position="center">

        <div style="position: absolute; left: 20%; top: 10%; width: 50%; background: lightslategrey; padding: 5%;">
          <p>Vorname: Rainer</p>
          <p>Nachname: Zufall</p>
          <p>Alter: 61</p>
          <p>Geschlecht: m&aumlnnlich</p>
        </div>

        <div id="fullscreenButtonPatient" class="buttonFlat2" onclick = "fullscreenClicked(event,this)" style="top:5px; right: 5px;">
          <img id="imgVisite" src="../../Assets/Icons/fullscreen.png" style="width: 100%; height: 100%;">
        </div>
        <div id="minimizeButtonPatient" class="buttonFlat2" onclick = "minimizedClicked(event,this)" style="top:5px; right: 60px;">
          <img id="imgVisite" src="../../Assets/Icons/fullscreen_exit.png" style="width: 100%; height: 100%;">
        </div>

        <div id="leftButtonPatient" class="buttonFlat" onclick = "clickMove(this,'left')" style="left: 5px; top:15%; height: 70%;">
          <img src="../../Assets/Icons/arrow-back.png" style="position: absolute; top: 50%;">
        </div>
        <div id="rightButtonPatient" class="buttonFlat" onclick = "clickMove(this,'right')"style="right: 5px; top:15%; height: 70%;">
          <img src="../../Assets/Icons/arrow-forward.png" style="position: absolute; top: 50%;">
        </div>
        <div id="uptButtonPatient" class="buttonFlat" onclick = "clickMove(this,'top')" style="left: 15%; top:5px; width: 70%;">
          <img src="../../Assets/Icons/arrow-up.png" style="position: absolute; left: 50%;">
        </div>
        <div id="downButtonPatient" class="buttonFlat" onclick = "clickMove(this,'bottom')"style="left: 15%; bottom:5px; width: 70%;">
          <img src="../../Assets/Icons/arrow-down.png" style="position: absolute; left: 50%;">
        </div>

        <div id="resizeButtonPatient" class="buttonResize">
          <img src="../../Assets/Icons/resize.png" style="width: 100%; height: 100%;" alt="">
        </div>

      </div> -->
    </div>
    <!-- <div id = "contextmenu" class="contextMenu draggable" active="false">
      <div id = "contextMenuGenes" class="contextMenuItem" onclick = "toggleArea(event,this)" area="geneArea">
        <img src="../../Assets/Icons/gene.png" alt="">
      </div>
      <div id = "contextMenuVisite" class="contextMenuItem" onclick = "toggleArea(event,this)" area="visiteArea">
        <img src="../../Assets/Icons/visite.png" alt="">
      </div>
      <div id = "contextMenuInfo" class="contextMenuItem" onclick = "toggleArea(event,this)" area="infoArea">
        <img src="../../Assets/Icons/info.png" alt="">
      </div>
      <div id = "contextMenuClose" class="contextMenuItem" onclick = "toggleArea(event,this)" area="contextmenu">
        <img src="../../Assets/Icons/close.png" alt="">
      </div>
    </div> -->
    <div id = "contextmenu" class="contextMenu2 draggable" active="false">
      <div id = "contextMenuGenes" class="contextMenuItem2" onclick = "toggleArea(event,this)" area="geneArea" style="position: absolute; left: -60px; bottom: 40px;">
        <img src="../../Assets/Icons/gene.png" alt="">
      </div>
      <div id = "contextMenuVisite" class="contextMenuItem2" onclick = "toggleArea(event,this)" area="visiteArea" style="position: absolute; left: 0px; bottom: 70px;">
        <img src="../../Assets/Icons/visite.png" alt="">
      </div>
      <div id = "contextMenuInfo" class="contextMenuItem2" onclick = "toggleArea(event,this)" area="infoArea" style="position: absolute; left: 60px; bottom: 40px;">
        <img src="../../Assets/Icons/info.png" alt="">
      </div>
      <div id = "contextMenuClose" class="contextMenuItem2" onclick = "toggleArea(event,this)" area="contextmenu" style="width: 60px; height: 60px;">
        <img src="../../Assets/Icons/close.png" alt="">
      </div>
    </div>
      
    <!-- <div id="modeSelectButton" class="button" style = "right: 100px; bottom: 10px;">
      <img src="../../Assets/Icons/layers.png"> 
    </div>
    
    <div id="modeMenu" style = "position: absolute; bottom: 70px; right: 100px;z-index: 10; background: none; display: flex; flex-direction: column-reverse;">
      <div id="modePatient" class="buttonSubmenu" onpointerenter="enterModeButton(this)" onpointerleave="leaveModeButton(this)" onclick = "layerSwitch(this)" style = "" layer="patient">
        <img src="../../Assets/Icons/info.png"> 
      </div>
      
    </div> -->
  </div>

   </body>
    <script>
      
      var currentLink = ""
      let leftArea = document.getElementById("leftArea")
      let rightArea = document.getElementById("rightArea")
      let topArea = document.getElementById("topArea")
      let bottomArea = document.getElementById("bottomArea")
      let explorationArea = document.getElementById("explorationArea")
      let contextMenu = document.getElementById("contextmenu")

      let visiteArea = document.getElementById("visiteArea")
      let infoArea = document.getElementById("infoArea")
      let geneArea = document.getElementById("geneArea")

      let windowWidth = window.innerWidth
      let windowHeight = window.innerHeight
      let explorationAreaWidth = window.innerWidth
      let explorationAreaHeight = window.innerHeight-50

      explorationArea.style.height = explorationAreaHeight+"px"
      explorationArea.style.width = explorationAreaWidth+"px"

      var draggables = document.getElementsByClassName("draggable")

      for (var i = 0; i < draggables.length; i++) {
        draggables[i].setAttribute("offsetX","0")
        draggables[i].setAttribute("offsetY","0")
      }
      
      geneArea.classList.remove("draggable")
      visiteArea.classList.remove("draggable")
      // modeMenu.setAttribute("active","false")

      let currentLayer = document.getElementById("patient")
      let resizeTarget = null
      let oldX = 0
      let oldY = 0
      let resizeable = false

      // document.oncontextmenu = function() {
      //   return false;
      // }

      var topLayerIndex = 2

      // $( "#geneArea" ).slideUp()
      // $( "#visiteArea" ).slideUp()
      let hv = visiteArea.getBoundingClientRect().height
      let wg = geneArea.getBoundingClientRect().width

      // TweenMax.to(visiteArea, 0.1, {y:hv})
      visiteArea.setAttribute("active","false")
      $(visiteArea).hide()
      // TweenMax.to(geneArea, 0.1, {x:wg})
      geneArea.setAttribute("active","false")
      $(geneArea).hide()

      infoArea.setAttribute("active","false")
      $(infoArea).hide()

      $( "#arid1b_sources" ).hide()
      $( "#srms_sources" ).hide()
      $( "#zdhhc13_sources" ).hide()
      $( "#document_img" ).hide()
      $( "#document_text" ).hide()
      $( "#document_pubmed" ).hide()

      $( "#contextmenu" ).hide()

      allelSlider.value = 95
      let currentAF = 100-allelSlider.value      

      $(".gene_button").filter(function() {
          return  $(this).attr("af") < currentAF
        }).slideUp()

        $(".gene_button").filter(function() {
            return  $(this).attr("af") > currentAF
        }).slideDown()
      
      sliderLabel.innerHTML = "Allelfrequenz: "+(currentAF).toString()+"%"

      allelSlider.oninput = function() {
        currentAF = 100-allelSlider.value
        console.log(currentAF)
        sliderLabel.innerHTML = "Allelfrequenz: "+(currentAF).toString()+"%"

        $(".gene_button").filter(function() {
          return  $(this).attr("af") < currentAF
        }).slideUp()

        $(".gene_button").filter(function() {
            return  $(this).attr("af") > currentAF
        }).slideDown()
      }     

      // document.getElementById("tumor").style.height = (window.innerHeight-50)+"px"
      // document.getElementById("patient").style.height = (window.innerHeight-50)+"px"
      // document.getElementById("visite").style.height = (window.innerHeight-50)+"px"
      
      // $( "#modeMenu" ).hide()editabl

      function cancelSelect(e,element){
        // console.log("start selecting",e.target.parentElement.contentEditable)
        // if(!e.target.parentElement.classList.contains("infoEntry"))e.preventDefault()
        if(!e.target.parentElement.getAttribute("contentEditable"))e.preventDefault()
      }
      function resizeWin(){
        /*console.log(window.innerHeight)
        document.getElementById("tumor").style.height = (window.innerHeight-50)+"px"
        document.getElementById("patient").style.height = (window.innerHeight-50)+"px"
        document.getElementById("visite").style.height = (window.innerHeight-50)+"px"*/
      }

      document.body.addEventListener('click',(event)=>{
        // console.log("clicked body",event.target.id,event.target.className)
        // $( "#contextmenu" ).hide()
        // if(event.target.className!="button")$( "#modeMenu" ).hide()
        // $( "#modeMenu" ).hide()
        // if(!event.target.className.includes("ui"))document.getElementById("select").style.visibility = "hidden"
      })
      
      document.body.addEventListener("contextmenu", (e)=>{
        console.log("context menu",e.clientX,e.clientY)
        e.preventDefault()
        $( "#contextmenu" ).show()
        
        xOffset = parseFloat(contextmenu.getAttribute("offsetX"))
        yOffset = parseFloat(contextmenu.getAttribute("offsetY"))
        console.log(xOffset,yOffset)
        contextMenu.style.left = (e.clientX-xOffset)+"px"
        contextMenu.style.top = (e.clientY-yOffset)+"px"
        contextMenu.setAttribute("active","true")
      })

      document.body.addEventListener('wheel',(event)=>{
        // console.log("Mouse Wheel",event.target.style.transform)
        if(event.target.className=="source"){
          var scale = parseFloat(event.target.getAttribute("scale"))
          scale+=event.deltaY*-0.001
          TweenMax.to(event.target, 0.1, {css: {scale: scale}})
          event.target.setAttribute("scale",scale.toString())
        }
      })

      /* document.getElementById("modeSelectButton").addEventListener("click",(e)=>{
        e.stopPropagation()
        console.log("selecting mode")
        // visite.style.opacity=0.9
        // tumor.style.opacity=0.9
        // patient.style.opacity=0.9
        // document.getElementById("modeMenu").style.visibility ="visible"
        $( "#modeMenu" ).slideToggle(100)
        
        modeMenu.setAttribute("active","true")
      }) */

      /*document.getElementById("modeTumor").addEventListener("click",()=>{
        console.log("selecting Tumor")
        bringToFront(document.getElementById("tumor"))
        $( "#modeMenu" ).hide()
      })

      document.getElementById("modeVisite").addEventListener("click",()=>{
        console.log("selecting Visite")
        bringToFront(document.getElementById("visite"))
        $( "#modeMenu" ).hide()
      })

      document.getElementById("modePatient").addEventListener("click",()=>{
        console.log("selecting Patient")
        bringToFront(document.getElementById("patient"))
        $( "#modeMenu" ).hide()
      })*/

      function pinArea(e,button){
        e.stopPropagation()
        e.preventDefault()
        let area = document.getElementById( button.getAttribute("area"))
        switch(area.getAttribute("pinned")){
          case "true":
            area.setAttribute("pinned","false")
            button.childNodes[1].src ="../../Assets/Icons/unpinned.png"
            area.classList.add("draggable")
            break
          case "false":
            area.setAttribute("pinned","true")
            button.childNodes[1].src ="../../Assets/Icons/pinned.png"
            area.classList.remove("draggable")
            break
        }

      }

      function rotateArea(e,button){
        
        e.stopPropagation()
        e.preventDefault()
        let area = document.getElementById( button.getAttribute("area"))
        // TweenLite.to(element, 2, {rotation:90, transformOrigin:"left 50%"});
        switch (getCurrentRotation(area)){
          case 0:
          TweenMax.to(area, 0.2, {rotation:90, transformOrigin:"50% 50%"})
          // area.style.transform = "rotate3d(0,0,1,90deg)"
          break
          case 90:
          TweenMax.to(area, 0.2, {rotation: 0, transformOrigin:"50% 50%"})
          break
        }
      }
      function toggleArea(e,button){
        e.stopPropagation()
        e.preventDefault()
        let area = document.getElementById( button.getAttribute("area"))
        console.log(button.getAttribute("area"))
        let x=0
        let y=0
        
        switch(area.getAttribute("active")){
          case "false":
            // x=0
            // y=0
            $(area).show()
            area.setAttribute("active","true")
            // console.log(button.childNodes[1])
            // button.childNodes[1].src ="../../Assets/Icons/close.png"
            break
          case "true":
            $(area).hide()
            // if(area.id=="geneArea"){
            //   x=wg
            //   button.childNodes[1].src ="../../Assets/Icons/gene.png"
            // }
            // if(area.id=="visiteArea"){
            //   y=hv
            //   button.childNodes[1].src ="../../Assets/Icons/visite.png"
            // }
            area.setAttribute("active","false")
            break          
        }

        // TweenMax.to(area, 0.1, {y:y,x:x})
        // $(area).slideDown(500)
      }

      function leaveModeButton(button){
        // let layer = document.getElementById(button.getAttribute('layer'))
        // bringToFront(currentLayer)
        // TweenMax.to(layer, 0.1, {scale:1})
                
        // if(modeMenu.getAttribute("active")=="true")layer.style.opacity = 0.9
      }

      function enterModeButton(button){
        // let area = document.getElementById(button.getAttribute('area'))
        // bringToFront(layer)
        // layer.style.opacity = 1
        
        // if(layer.getAttribute("fullscreen")!="on")TweenMax.to(layer, 0.1, {scale:1.1})
        /*if(button.id.indexOf('Patient')>-1){
          bringToFront(patient)
          patient.style.opacity = 0.7
        }
        if(button.id.indexOf('Tumor')>-1){
          bringToFront(tumor)
          tumor.style.opacity = 0.7
        }
        if(button.id.indexOf('Visite')>-1){
          bringToFront(visite)
          visite.style.opacity = 0.7
        }*/
      }

      function openDocument(e,element){

        var doc_t = document.getElementById("document_text")
        var doc_i = document.getElementById("document_img")
        
        TweenMax.to(element, 0.1, {css: {scale: 1}})    
        element.setAttribute("scale","1")

        
        var rect = explorationArea.getBoundingClientRect()
        var x = e.clientX //- rect.left
        var y = e.clientY //- rect.top

        console.log("X Y",x,y)

        if(element.id=="document_text_button"){
          $( "#document_text" ).toggle()
          bringToFront(doc_t)

          h = doc_t.getBoundingClientRect().height
          y-=h
          
          TweenMax.to(doc_t, 0.0, {x:x-100, y:y-150, transformOrigin:"0% 0%"})
          
          doc_t.setAttribute("offsetX",(x-100))
          doc_t.setAttribute("offsetY",(y-150))
          // TweenMax.to(doc_t, 0.0, {x:x, y:y, transformOrigin:"0% 0%"})   
          // doc_t.style.left = e.clientX+"px"
          // doc_t.style.top = (y-h)+"px"

        }
        if(element.id=="document_img_button"){
          $( "#document_img" ).toggle()
          bringToFront(doc_i)

          h = doc_i.getBoundingClientRect().height
          y-=h

          TweenMax.to(doc_i, 0.0, {x:x-100, y:y-150, transformOrigin:"0% 0%"})
          
          doc_i.setAttribute("offsetX",(x-100))
          doc_i.setAttribute("offsetY",(y-150))
          // doc_i.style.left = "50%"
          // doc_i.style.top = "20%"
        }
      }
      
      function openGeneSources(element){
        console.log("open gene",element.id,element.getAttribute("active"))
        
        switch(element.getAttribute("active")){
          case "false":
            element.setAttribute("active","true")
            TweenMax.to(element, 0.1, {x:-10})
            break
          case "true":
            element.setAttribute("active","false")
            TweenMax.to(element, 0.1, {x:0})
            break
        }

        if(element.id=="arid1b_button"){
          $( "#arid1b_sources" ).toggle()
          var d = document.getElementById("arid1b_sources")
          bringToFront(d)
        
          TweenMax.to(d, 0.1, {css: {scale: 1}})    
          d.setAttribute("scale","1")
        }
        if(element.id=="srms_button"){
          $( "#srms_sources" ).toggle()
          var d = document.getElementById("srms_sources")
          bringToFront(d)
        
          TweenMax.to(d, 0.1, {css: {scale: 1}})    
          d.setAttribute("scale","1")
        }
        if(element.id=="zdhhc13_button"){
          $( "#zdhhc13_sources" ).toggle()
          var d = document.getElementById("zdhhc13_sources")
          bringToFront(d)
        
          TweenMax.to(d, 0.1, {css: {scale: 1}})    
          d.setAttribute("scale","1")
        }
      }
      
      /* function layerSwitch(element){
        console.log("selecting",element.id)
        let layer = document.getElementById(element.getAttribute("layer"))
        // if(element.id=="modePatient")bringToFront(document.getElementById("patient"))
        // if(element.id=="modeVisite")bringToFront(document.getElementById("visite"))
        // if(element.id=="modeTumor")bringToFront(document.getElementById("tumor"))
        bringToFront(layer)
        visite.style.opacity=1
        tumor.style.opacity=1
        patient.style.opacity=1
        currentLayer = layer
        modeMenu.setAttribute("active","false")

        $( "#modeMenu" ).hide()
      } */

      function layerClicked(element){
        console.log(element.getAttribute("fullscreen"))
        bringToFront(element)
        currentLayer = element
      }

      function bringToFront(element){
        // console.log("BringToFront")
        topLayerIndex++
        element.style.zIndex =topLayerIndex
        document.getElementById("closeVisite").style.zIndex = topLayerIndex+1
        document.getElementById("closeGene").style.zIndex = topLayerIndex+1
      }

      function placeLayer(element){
        let pos = element.getAttribute('positionTest')
        // console.log("positionTest",element.getAttribute('positionTest'))
        // if(pos!="none")moveLayer(element,pos)
        element.setAttribute('positionTest','none')
        element.style.opacity = 1
      }

      function clickMove(button,position){
        element = button.parentNode
        moveLayer(element,position)
      }

      function moveLayer(element,position){
        var h = explorationAreaHeight
        var w = explorationAreaWidth

        element.setAttribute("fullscreen","off")
        element.setAttribute("allowDrag","on")

        if(position.indexOf("left")>-1){
          element.setAttribute("position","left")
          TweenMax.to(element, 0.1, {css: {top: 0, left: 0, height: h, width:w/2}})
        }
        if(position.toString().indexOf("right")>-1){
          element.setAttribute("position","right")
          TweenMax.to(element, 0.1, {css: {top: 0, left: w/2, height: h, width:w/2}})
        }
        if(position.toString().indexOf("top")>-1){
          element.setAttribute("position","top")
          TweenMax.to(element, 0.1, {css: {top: 0, left: 0, height: h/2, width:w}})
        }
        if(position.toString().indexOf("bottom")>-1){
          element.setAttribute("position","bottom")
          TweenMax.to(element, 0.1, {css: {top:  h/2, left: 0, height: h/2, width:w}})
        }
        element.style.opacity = 1
      }

      /* function moveRightClicked(element){
        var h = (window.innerHeight-50)
        var w = window.innerWidth
        console.log(element.parentNode.getAttribute("position"))
        // if(element.parentNode.getAttribute("position").toString().indexOf("left")<0){
          element.parentNode.setAttribute("position","right")
          element.parentNode.setAttribute("fullscreen","off")
          element.parentNode.setAttribute("allowDrag","on")
          // console.log(element.id.toString().indexOf("Patient",document.getElementById("fullscreenButtonPatient").src))
          if(element.id.toString().indexOf("Patient")>0)document.getElementById("fullscreenButtonPatient").childNodes[1].src = "../../Assets/Icons/fullscreen.png"
          if(element.id.toString().indexOf("Tumor")>0)document.getElementById("fullscreenButtonTumor").childNodes[1].src = "../../Assets/Icons/fullscreen.png"
          if(element.id.toString().indexOf("Visite")>0)document.getElementById("fullscreenButtonVisite").childNodes[1].src = "../../Assets/Icons/fullscreen.png"

          TweenMax.to(element.parentNode, 0.1, {css: {top: 50, left: w/2, height: h, width:w/2}})
        // }
      } */

      function expandPubmed(e,element){   
        var doc = document.getElementById("document_pubmed");     
        $( "#document_pubmed" ).show()
        bringToFront(doc)
        doc.style.left = e.clientX+"px"
        doc.style.top = (e.clientY-100)+"px"
      }
      function switchPubmed(e,element){
        document.getElementById("aridIMG").src = "../Assets/Images/arid1b_pubmed.png"
        document.getElementById("expandPubmedButton").style.visibility = "visible"

      }
      function switchSummary(e,element){
        document.getElementById("aridIMG").src = "../Assets/Images/arid1b.png"
        document.getElementById("expandPubmedButton").style.visibility = "hidden"
      }

      function closeClicked(e,element){
        let target = element.parentNode
        if(element.getAttribute("type")=="gene"){
          console.log("closing",element.getAttribute("button"))
          let button = document.getElementById(element.getAttribute("button"))          
          button.setAttribute("active","false")
          TweenMax.to(button, 0.1, {x:0})
        }
        $(target).toggle()
      }
      
      function minimizedClicked(e,element){
        e.stopPropagation()
        let layer = element.parentNode
        let scale = parseFloat( layer.getAttribute("scale"))
        var h = (window.innerHeight-50)/scale
        var w = window.innerWidth/scale

        element.parentNode.setAttribute("fullscreen","off")
        element.parentNode.setAttribute("allowDrag","on")
        // element.parentNode.style.boxShadow = "0px 0px 15px 5px  rgb(58, 58, 58)";
        // TweenMax.to(element.parentNode, 0.1, {scale:0.7, onComplete:function(){
        // }})            
        // TweenMax.to(element.parentNode, 0.1, {css: {top: 150, left: 100, height: h/2, width:w/2}})
        TweenMax.to(layer, 0.1, {css: {height: h/2, width:w/2}})
        TweenMax.to(layer, 0.1, {css:{top:100,left:100}})
      }
      function fullscreenClicked(e,element){
        e.stopPropagation()
        let layer = element.parentNode
        let scale = parseFloat( layer.getAttribute("scale"))
        let parentLayer = layer.parentNode
        // var h = (window.innerHeight-50)
        // var w = window.innerWidth
        let h = parentLayer.getBoundingClientRect().height/scale
        let w = parentLayer.getBoundingClientRect().width/scale
        let x = layer.getBoundingClientRect().x/1
        let y = layer.getBoundingClientRect().y/1
        let xP = parentLayer.getBoundingClientRect().x/1
        let yP = parentLayer.getBoundingClientRect().y/1
        let top = parentLayer.getBoundingClientRect().top

        // switch(element.childNodes[1].src.toString().indexOf("exit")>0){
        //   case false: 
        //     element.childNodes[1].src = "../../Assets/Icons/fullscreen_exit.png"
        layer.setAttribute("fullscreen","on")
        layer.setAttribute("allowDrag","off")
        layer.setAttribute("position","center")
        // element.parentNode.style.boxShadow = "none";
        bringToFront(element.parentNode)
            // TweenMax.to(element.parentNode, 0.1, {scale:1})
            // TweenMax.to(element.parentNode, 0.1, {css: {top: 50, left: 0}})
          
        let xPos = xP - x
        let yPos = yP - y
        
        // console.log("FULLSCREEN",parentLayer,x,xP,xPos)
        // TweenMax.to(layer, 0.1, {css: {top: 0, left: 0, height: h, width:w}})
        TweenMax.to(layer, 0.1, {css: {height: h, width:w}})
        TweenMax.to(layer, 0.1, {css:{top:0, left:0}})
            // break
          // case true: 
          //   element.childNodes[1].src = "../../Assets/Icons/fullscreen.png"
          //   break

        // }
        // console.log( element.childNodes[1].src.toString().indexOf("exit"))
          
      }
      
      // dragElement(document.getElementById("visite"))
      // dragElement(document.getElementById("tumor"))
      // dragElement(document.getElementById("patient"))

      // dragElement(document.getElementById("arid1b_sources"))
      // dragElement(document.getElementById("srms_sources"))
      // dragElement(document.getElementById("zdhhc13_sources"))
      // dragElement(document.getElementById("document_text"))
      // dragElement(document.getElementById("document_img"))

            /*document.getElementById("listButton").addEventListener("click",()=>{
                $( "#list" ).toggle();
            })*/

      function clicked(element){
        TweenMax.to(element, 0.1, {scale:1.1, onComplete:function(){
          TweenMax.to(element, 0.1, {scale:1.0, onComplete:function(){
            // location = "./Apps/Unwetter/index.html"
          }})
        }})
      }

      function dragElement(elmnt) {
        var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
        if (document.getElementById(elmnt.id + "header")) {
          // if present, the header is where you move the DIV from:
          document.getElementById(elmnt.id + "header").onpointerdown = dragMouseDown;
        } else {
          // otherwise, move the DIV from anywhere inside the DIV:
          // elmnt.onmousedown = dragMouseDown;
          elmnt.onpointerdown = dragMouseDown;
        }

        function dragMouseDown(e) {
          e.stopPropagation()
          e = e || window.event
          e.preventDefault()
          // get the mouse cursor position at startup:
          pos3 = e.clientX;
          pos4 = e.clientY
          // document.onmouseup = closeDragElement;
          document.onpointerup = closeDragElement
          // call a function whenever the cursor moves:
          // document.onmousemove = elementDrag;
          document.onpointermove = elementDrag
          bringToFront(elmnt)
        }

        function elementDrag(e) {
          if(elmnt.getAttribute("allowDrag")=="on"){
            e = e || window.event
            e.preventDefault()
            // calculate the new cursor position:
            pos1 = pos3 - e.clientX
            pos2 = pos4 - e.clientY
            pos3 = e.clientX
            pos4 = e.clientY
            // set the element's new position:
            var r = elmnt.getBoundingClientRect().right
            var l = elmnt.getBoundingClientRect().left
            var w = elmnt.getBoundingClientRect().width
            var h = elmnt.getBoundingClientRect().height

            var ww = window.innerWidth
            var wh = window.innerHeight

            var lPos = 0
            if((ww-r>10))lPos = elmnt.offsetLeft - pos1
            if((ww-r<=10))lPos = ww-11-w

            // console.log(collision(elmnt))
            let pos = collision(elmnt)
            elmnt.setAttribute('positionTest',pos)
            elmnt.style.opacity = 0.8
            /* if(pos!="none"){
              elmnt.style.opacity = 0.5
            }
            if(pos=="none"){
              elmnt.style.opacity = 1
            } */

         /*    TweenMax.to(elmnt, 0, {css: {top: (elmnt.offsetTop - pos2), left:lPos},onComplete:function(){                
              // TweenMax.to(elmnt, 0, {css: {top: (elmnt.offsetTop + pos2), right:(w-15)}})
              // TweenMax.to(elmnt, 0, {scale:1.9})
            }}) */
            // TweenMax.to(elmnt, 0.1, {x: e.clientX, transformOrigin:"0% 0%"}, 0)
            
            elmnt.style.top = (elmnt.offsetTop - pos2) + "px"
            elmnt.style.left = (elmnt.offsetLeft - pos1) + "px"

            // elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
            // elmnt.style.left = (lPos) + "px";
          }
        }

        function closeDragElement() {
          // stop moving when mouse button is released:
          // document.onmouseup = null;
          document.onpointerup = null
          // document.onmousemove = null;
          document.onpointermove = null
          elmnt.setAttribute('dragging','false')
          elmnt.style.opacity = 1
        }
      }

      
      // resizeElement(document.getElementById("resizeButtonPatient"))
      // resizeElement(document.getElementById("resizeButtonVisite"))
      // resizeElement(document.getElementById("resizeButtonTumor"))

      resizeElement(document.getElementById("resizeButtonArid"))
      resizeElement(document.getElementById("resizeButtonSrms"))
      resizeElement(document.getElementById("resizeButtonZdhh"))

      resizeElement(document.getElementById("resizeButtonDocument"))
      resizeElement(document.getElementById("resizeButtonImg"))
      resizeElement(document.getElementById("resizeButtonPubmed"))

      function resizeElement(button) {
        let elmnt = button.parentNode
        button.onpointerdown = resizeMouseDown
        let scale = 1.0

        function resizeMouseDown(e) {
          e.stopPropagation()
          e = e || window.event
          e.preventDefault()
          oldX = 0
          oldY = 0
          scale = parseFloat(elmnt.getAttribute("scale"))
          document.onpointerup = closeResizeElement
          document.onpointermove = elementResize
          bringToFront(elmnt)
        }

        function elementResize(e) {
            e = e || window.event
            e.preventDefault()
            
            if(elmnt.getAttribute("allowDrag")=="off")elmnt.setAttribute("allowDrag","on")
            
              let deltaX = 0
              let deltaY = 0
              if(oldX!=0) deltaX = (e.clientX - oldX)
              if(oldY!=0) deltaY = (e.clientY - oldY)

              oldX = e.clientX
              oldY = e.clientY
                            
              let h = elmnt.getBoundingClientRect().height
              let w = elmnt.getBoundingClientRect().width
              h = (h + deltaY)/scale
              w = (w + deltaX)/scale
              elmnt.style.width = w + "px"
              elmnt.style.height = h + "px"
        }

        function closeResizeElement() {
          document.onpointerup = null;
          document.onpointermove = null;
        }
      }
      var dragItem =null

    var active = false
    var currentX
    var currentY
    var initialX
    var initialY
    var xOffset = 0
    var yOffset = 0

    var sources = document.getElementsByClassName("source")
    var areas = document.getElementsByClassName("area")
    // for (var i = 0; i < areas.length; i++) {
    //   areas[i].setAttribute("offsetX","0")
    //   areas[i].setAttribute("offsetY","0")
    // }

    main.addEventListener("touchstart", dragStart, false)
    main.addEventListener("touchend", dragEnd, false)
    main.addEventListener("touchmove", drag, false)

    main.addEventListener("mousedown", dragStart, false)
    main.addEventListener("mouseup", dragEnd, false)
    main.addEventListener("mousemove", drag, false)

    function dragStart(e) {
      xOffset = parseFloat(e.target.getAttribute("offsetX"))
      yOffset = parseFloat(e.target.getAttribute("offsetY"))
      // console.log("DRAG START",e.target,yOffset)
      if (e.type === "touchstart") {
        initialX = e.touches[0].clientX - xOffset;
        initialY = e.touches[0].clientY - yOffset;
      } else {
        initialX = e.clientX - xOffset;
        initialY = e.clientY - yOffset;
      }
      if (e.target.classList.contains("draggable") ) {
        // console.log("++++++++++++++++++++++++")
        active = true;
        dragItem = e.target
        bringToFront(dragItem)
      }
    }

    function dragEnd(e) {
      initialX = currentX;
      initialY = currentY;

      active = false;
    }

    function drag(e) {
      if (active) {
      
        e.preventDefault();
      
        if (e.type === "touchmove") {
          currentX = e.touches[0].clientX - initialX;
          currentY = e.touches[0].clientY - initialY;
        } else {
          currentX = e.clientX - initialX;
          currentY = e.clientY - initialY;
        }

        xOffset = currentX;
        yOffset = currentY;
        dragItem.setAttribute("offsetX",currentX)
        dragItem.setAttribute("offsetY",currentY)

        setTranslate(currentX, currentY, dragItem);
      }
    }

    function setTranslate(xPos, yPos, el) {
      angle = getCurrentRotation(el)
      TweenMax.to(el, 0.0, {x: xPos, y: yPos, transformOrigin:"50% 50%"})

      // el.style.transform = "translate3d(" + xPos + "px, " + yPos + "px, 0)";
      // el.style.transform = "rotate3d(0,0,1,90deg )";
    }
      /*function resizePointerdown(e,element){
        e.stopPropagation()
        e.preventDefault()
        console.log("start resize", element)
        resizeable = true
        // resizeTarget = element.parentNode
      }
      
      function resize(e,element){
        e.stopPropagation()
        e.preventDefault()
        let target = element.parentNode
        if(target.getAttribute("allowDrag")=="off")target.setAttribute("allowDrag","on")
        // console.log("resizing", element.parentNode)
        if(resizeable){
          let deltaX = 0
          let deltaY = 0
          if(oldX!=0) deltaX = e.clientX - oldX
          if(oldY!=0) deltaY = e.clientY - oldY

          oldX = e.clientX
          oldY = e.clientY
          console.log('resize',deltaX,deltaY)
          let h = target.getBoundingClientRect().height
          let w = target.getBoundingClientRect().width
          h = h + deltaY
          w = w + deltaX
          target.style.width = w + "px"
          target.style.height = h + "px"
        }
      }

      function resizePointerup(e,element){
        e.stopPropagation()
        e.preventDefault()
        console.log("end resize", element) 
        resizeable = false
        oldX = 0
        oldY = 0
        // resizeTarget = null       
      }

      function resizePointerleave(e,element){
        e.stopPropagation()
        e.preventDefault()
        console.log("end resize", element) 
        resizeable = false
        oldX = 0
        oldY = 0
        // resizeTarget = null       
      }*/
      
     /*  document.body.addEventListener('pointermove',(e)=>{
        if(resizeTarget!=null){
          let deltaX = 0
          let deltaY = 0
          if(oldX!=0) deltaX = e.clientX - oldX
          if(oldY!=0) deltaY = e.clientY - oldY

          oldX = e.clientX
          oldY = e.clientY
          console.log('resize',deltaX,deltaY)
          let h = resizeTarget.getBoundingClientRect().height
          let w = resizeTarget.getBoundingClientRect().width
          h = h + deltaY
          w = w + deltaX
          resizeTarget.style.width = w + "px"
          resizeTarget.style.height = h + "px"
        }
      }) */

      function collision(div1) {
        let test = false
        let area = "none"
        
        if(div1.getBoundingClientRect().left < leftArea.getBoundingClientRect().right)area = "left"
        if(div1.getBoundingClientRect().right > rightArea.getBoundingClientRect().left)area = "right"
        if(div1.getBoundingClientRect().top < topArea.getBoundingClientRect().bottom)area = "top"
        if(div1.getBoundingClientRect().bottom > bottomArea.getBoundingClientRect().top)area = "bottom"
        return area;
      }
      
      $( ".uiButtonFrame" ).on( "pointerenter", function() {
        // console.log( this)
        $( this ).find(".uiButtonBackground").css("box-shadow", "15px 15px 5px rgba(2, 2, 2, 0.308)")
        $( this ).css("transform", "scale(1.1)")
        // $( this ).find(".uiButtonBackground").css("transform", "scale(1.1)")
        // $( this ).find(".uiText").css("transform", "scale(1.1)")
        $( this ).css("text-shadow"," 8px 8px 5px rgba(2, 2, 2, 0.308)")
      })

      $( ".uiButtonFrame" ).on( "pointerleave", function() {
        // console.log( this)
        $( this ).find(".uiButtonBackground").css("box-shadow", "10px 10px 5px rgba(2, 2, 2, 0.308)")
        $( this ).css("transform", "scale(1.0)")
        // $( this ).find(".uiButtonBackground").css("transform", "scale(1.0)")
        // $( this ).find(".uiText").css("transform", "scale(1.0)")
        $( this ).css("text-shadow"," 5px 5px 5px rgba(2, 2, 2, 0.308)")
      })

      /*function openDialogue(element){
        console.log(event.clientX,event.clientY)
        // if(document.getElementById("select").style.visibility == "hidden"){
          document.getElementById("select").style.visibility = "visible"
          document.getElementById("select").style.top = event.clientY+"px"
          document.getElementById("select").style.left = event.clientX+"px"
        // }

        currentLink =element.parentElement.getAttribute("href")
        document.getElementById("szene").setAttribute("max",element.getAttribute("n"))
        TweenMax.to(element, 0.1, {scale:1.1, onComplete:function(){
          TweenMax.to(element, 0.1, {scale:1.0, onComplete:function(){
          }})
        }})
      }
      function openLink(link){
        var s = document.getElementById("szene").value
        console.log(s)
        switch (currentLink.includes("?")){
          case true:
            currentLink +=s
            break
          case false:
            currentLink +="?"+s
            break
          
        }
        location = currentLink
        document.getElementById("szene").value = 0
        // document.getElementById("select").style.visibility = "visible"
      }*/
      

    function gotoPage(element){
        location = element.getAttribute("href")
    }

    function hover(element){
      console.log("Hovering",element)
    }

    function getCurrentRotation(el){
      var st = window.getComputedStyle(el, null);
      var tm = st.getPropertyValue("-webkit-transform") ||
              st.getPropertyValue("-moz-transform") ||
              st.getPropertyValue("-ms-transform") ||
              st.getPropertyValue("-o-transform") ||
              st.getPropertyValue("transform") ||
              "none";
      if (tm != "none") {
        var values = tm.split('(')[1].split(')')[0].split(',');
        /*
        a = values[0];
        b = values[1];
        angle = Math.round(Math.atan2(b,a) * (180/Math.PI));
        */
        //return Math.round(Math.atan2(values[1],values[0]) * (180/Math.PI)); //this would return negative values the OP doesn't wants so it got commented and the next lines of code added
        var angle = Math.round(Math.atan2(values[1],values[0]) * (180/Math.PI));
        return (angle < 0 ? angle + 360 : angle); //adding 360 degrees here when angle < 0 is equivalent to adding (2 * Math.PI) radians before
      }
      return 0;
    }

    // document.getElementById('pdf').addEventListener('click',(e)=>{
    //   e.stopPropagation()
    //   TweenMax.to(e.target, 0.1, {scale:1.1, onComplete:function(){
    //     TweenMax.to(e.target, 0.1, {scale:1.0, onComplete:function(){
    //       // location = "./Apps/TestMolekuele/assets/marker/Marker.pdf?target=_blank"
    //     }})
    //   }})
    // })
      </script>
  </script>
</html>