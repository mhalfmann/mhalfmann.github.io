<!doctype HTML>
<html>
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
<script src="./Javascript/aframe.min.js"></script>
<script src="./Javascript/aframe-ar.js"></script>
<script src="./Javascript/hammer.js"></script>
<link rel="stylesheet" type="text/css" href="./css/ui.css">
<!-- <script src="./Javascript/jquery-3.4.0.min.js"></script> -->
<!-- <script src="./Javascript/TweenMax.min.js"></script> -->
  <body style='margin : 0px; overflow: hidden;'>
      <script>
          AFRAME.registerComponent('set-marker', {
            init: function () {
              
              window.markers = document.querySelectorAll('a-marker')
              window.models = document.querySelectorAll('a-gltf-model')

                let objects1 = []
                let objects2 = []
                let objects3 = []

                window.objectsLoaded = 0
                window.pointerCount = 0

                objects1[0] = document.querySelector('#model11')
                objects1[1] = document.querySelector('#model12')
                objects1[2] = document.querySelector('#model13')
                objects1[3] = document.querySelector('#model14')
                objects1[4] = document.querySelector('#model15')

                objects2[0] = document.querySelector('#model21')
                objects2[1] = document.querySelector('#model22')
                // objects2[2] = document.querySelector('#model23')
                // objects2[3] = document.querySelector('#model24')
                // objects2[4] = document.querySelector('#model25')

                objects3[0] = document.querySelector('#model31')
                objects3[1] = document.querySelector('#model32')
                // objects3[2] = document.querySelector('#model33')
                // objects3[3] = document.querySelector('#model34')
                // objects3[4] = document.querySelector('#model35')

                for(var i = 0; i<objects1.length; i++){
                  objects1[i].addEventListener('model-loaded',()=>{
                    window.objectsLoaded++
                  })
                }
                for(var i = 0; i<objects2.length; i++){
                  objects2[i].addEventListener('model-loaded',()=>{
                    window.objectsLoaded++
                  })
                }
                for(var i = 0; i<objects3.length; i++){
                  objects3[i].addEventListener('model-loaded',()=>{
                    window.objectsLoaded++
                  })
                }
                      
            },
            tick: function () {

              document.getElementById('loading').innerHTML = "Lade Modelle " + window.objectsLoaded + " / "+window.models.length
              if(window.objectsLoaded == window.models.length){                
                document.getElementById('overlay').style.visibility = "hidden"
              }
            },
          })
        </script>
      
      <a-scene renderer="logarithmicDepthBuffer: true;" embedded arjs='debugUIEnabled: false; patternRatio: 0.5' vr-mode-ui='enabled: false' set-marker >
        <a-marker id = "Thermoplast" cursor-listener type="pattern" url="./assets/marker/pattern-bottle.patt">
         <!-- <a-entity id="model11" obj-model="obj: url(./models/Duroplast.obj); mtl: url(./models/Duroplast.mtl)" ></a-entity> -->
         <a-gltf-model id="model11" src="assets/models/bottle.gltf"></a-gltf-model>
         <a-gltf-model id="model12" src="assets/models/Thermoplast_Nudel.gltf"></a-gltf-model>
         <!-- <a-box id="model13" position='0 0.5 0' height="1.5" width="1.0" material='color: lime;' transparent= "true" opacity= "0.5" clicking=""></a-box>
         <a-box id="model14" position='0 0.5 0' height="1.5" width="1.0" material='color: pink;' transparent= "true" opacity= "0.5"  clicking=""></a-box>
         <a-box id="model15" position='0 0.5 0' height="1.5" width="1.0" material='color: red;' transparent= "true" opacity= "0.5"  clicking=""></a-box> -->
         <a-gltf-model id="model13" src="assets/models/Thermoplast_Sphere_black_stacked_reduced.gltf"></a-gltf-model>
         <a-gltf-model id="model14" src="assets/models/Thermoplast_Ball_black_stacked_reduced.gltf"></a-gltf-model>
         <a-gltf-model id="model15" src="assets/models/Thermoplast_Stick_black_stacked_reduced.gltf"></a-gltf-model>
       </a-marker>
 
       <a-marker id = "Elastomer" cursor-listener type="pattern" url="./assets/marker/pattern-rubber.patt">
         <a-gltf-model id="model21" src="assets/models/rubber.gltf"></a-gltf-model>
         <a-gltf-model id="model22" src="assets/models/Elastomer_Nudel.gltf"></a-gltf-model>
         <!-- <a-box id="model23" position='0 0.5 0' height="1.5" width="1.0" material='color: lime;' transparent= "true" opacity= "0.5" clicking=""></a-box>
         <a-box id="model24" position='0 0.5 0' height="1.5" width="1.0" material='color: pink;' transparent= "true" opacity= "0.5"  clicking=""></a-box>
         <a-box id="model25" position='0 0.5 0' height="1.5" width="1.0" material='color: red;' transparent= "true" opacity= "0.5"  clicking=""></a-box> -->
         <!-- <a-gltf-model id="model23" src="assets/models/Elastomer_Sphere_black.glb"></a-gltf-model> -->
         <!-- <a-gltf-model id="model24" src="assets/models/Elastomer_Ball_black.glb"></a-gltf-model> -->
         <!-- <a-gltf-model id="model25" src="assets/models/Elastomer_Stick_black.glb"></a-gltf-model> -->
       </a-marker>
 
       <a-marker id = "Duroplast" type="pattern" url="./assets/marker/pattern-steckdose.patt">
         <a-gltf-model id="model31" src="assets/models/socket2.gltf"></a-gltf-model>
         <a-gltf-model id="model32" src="assets/models/Duroplast_Nudel.gltf"></a-gltf-model>
         <!-- <a-box id="model33" position='0 0.5 0' height="1.5" width="1.0" material='color: lime;' transparent= "true" opacity= "0.5" clicking=""></a-box>
         <a-box id="model34" position='0 0.5 0' height="1.5" width="1.0" material='color: pink;' transparent= "true" opacity= "0.5"  clicking=""></a-box>
         <a-box id="model35" position='0 0.5 0' height="1.5" width="1.0" material='color: red;' transparent= "true" opacity= "0.5"  clicking=""></a-box> -->
         <!-- <a-gltf-model id="model33" src="assets/models/Duroplast_Sphere_black.glb"></a-gltf-model> -->
         <!-- <a-gltf-model id="model34" src="assets/models/Duroplast_Ball_black.glb"></a-gltf-model> -->
         <!-- <a-gltf-model id="model35" src="assets/models/Duroplast_Stick_black.glb"></a-gltf-model> -->
       </a-marker>
 
       <a-entity id="cam" camera >
       </a-entity>
     </a-scene>
    <div id = "header" style="position: absolute; top: 0px; left: 0px; display: flex; flex-direction: row;">
      <div id="name" class="uiElement" style="margin: 5px; padding: 5px; opacity: 0;"></div>
    </div>

    <div id = "toolbar" style="position: absolute; bottom: 0px; left: 0px; display: flex;flex-direction: row;">
      <div id="legendButton" class="uiButton" style="margin: 5px; padding: 5px; opacity: 1;">Legende</div>
      <!-- <div id="homeButton" class="uiButton" style="margin: 5px; padding: 5px;">Startseite</div> -->
      <img id="reloadButton" class="uiButton" style="margin: 5px; padding: 5px; height: 5vh; width: 5vh; visibility: hidden;" src="./assets/icons/refresh.png"><!-- Neu laden</div> -->
      <div id="version" class="uiButton" style="margin: 5px; padding: 5px; visibility: hidden;">zoomable</div>
    </div>

    <div id="button" class="uiElement" style="position: absolute; top: 15%; left: 20%; visibility: visible;">
      <div id="buttonInfo" style="margin: 10px; color: white">Bitte Marker Scannen</div>
      <div id="buttonClickable" class= "innerButton" style="margin: 10px; width: 90%; height: 0vh; visibility: hidden; border-radius: 5px; ">      
        <div id="buttonAction" style="margin: 10px; padding: 5px; text-align: center; color:white"></div>
      </div>

    </div>

    <div id="legendeNudel" class="uiElement" style="position: absolute; top: 10%; left: 5%; display: flex; flex-direction: column; opacity: 0.8; visibility: hidden;">
      <div id="Verknuepfung" style="display: flex; flex-direction: row; margin: 1vh;">
        <div style="width: 2vh; height: 2vh; background: grey; border-radius: 50%; margin: 5px;" ></div>
        <div id="VerknuepfungInfo"> = Verknuepfung</div>
      </div>
    </div>

    <div id="legendeThermoplast" class="uiElement" marker="Thermoplast" style="position: absolute; top: 10%; left: 5%; display: flex; flex-direction: column; opacity: 0.8; visibility: hidden;">
      <div id="kohlenstoff" style="display: flex; flex-direction: row; margin: 1vh;">
        <div style="width: 2vh; height: 2vh; background: darkgray; border-radius: 50%; margin: 5px;" ></div>
        <div id="kohlenstoffInfo"> = Kohlenstoff</div>
      </div>
      <div id="sauerstoff" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: red; border-radius: 50%; margin: 5px;" ></div>
          <div id="sauerstoffInfo"> = Sauerstoff</div>
      </div>
      <div id="wasserstoff" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: white; border-radius: 50%; margin: 5px;" ></div>
          <div id="wasserstoffInfo"> = Wasserstoff</div>
      </div>
    </div>

    </div> 
    <div id="legendeElastomer" class="uiElement" marker="Elastomer" style="position: absolute; top: 10%; left: 5%; display: flex; flex-direction: column; opacity: 0.8; visibility: hidden;">
      <div id="kohlenstoff" style="display: flex; flex-direction: row; margin: 1vh;">
        <div style="width: 2vh; height: 2vh; background: darkgray; border-radius: 50%; margin: 5px;" ></div>
        <div id="kohlenstoffInfo"> = Kohlenstoff</div>
      </div>
      <div id="schwefel" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: yellow; border-radius: 50%; margin: 5px;" ></div>
          <div id="schwefelInfo"> = Schwefel</div>
      </div>
      <div id="wasserstoff" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: white; border-radius: 50%; margin: 5px;" ></div>
          <div id="wasserstoffInfo"> = Wasserstoff</div>
      </div>
    </div>
    </div>

    <div id="legendeDuroplast" class="uiElement" marker="Duroplast" style="position: absolute; top: 10%; left: 5%; display: flex; flex-direction: column; opacity: 0.8; visibility: hidden;">
      <div id="kohlenstoff" style="display: flex; flex-direction: row; margin: 1vh;">
        <div style="width: 2vh; height: 2vh; background: darkgray; border-radius: 50%; margin: 5px;" ></div>
        <div id="kohlenstoffInfo"> = Kohlenstoff</div>
      </div>
      <div id="sauerstoff" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: red; border-radius: 50%; margin: 5px;" ></div>
          <div id="sauerstoffInfo"> = Sauerstoff</div>
      </div>
      <div id="stickstoff" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: blue; border-radius: 50%; margin: 5px;" ></div>
          <div id="stickstoffInfo"> = Stickstoff</div>
      </div>
      <div id="wasserstoff" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: white; border-radius: 50%; margin: 5px;" ></div>
          <div id="wasserstoffInfo"> = Wasserstoff</div>
      </div>
    </div>

    <div id = "overlay" style = "position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; background: rgb(255, 105, 0);">
      <div id = "loading" class = "uiElement" style="position: absolute; left: 5%; top: 50%; font-size: 8vw;"></div>
    </div>

  </body>
  <script>
  </script>
</html>