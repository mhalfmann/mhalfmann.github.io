<!doctype HTML>
<html>
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
<script src="./Javascript/aframe.min.js"></script>
<script src="./Javascript/aframe-ar.js"></script>
<script src="./Javascript/hammer.js"></script>
<link rel="stylesheet" type="text/css" href="./css/ui.css">
<!-- <script src="./Javascript/jquery-3.4.0.min.js"></script> -->
<!-- <script src="./Javascript/TweenMax.min.js"></script> -->
  <body style='margin : 0px; overflow: hidden;'>
      <script>
          AFRAME.registerComponent('set-marker', {
            init: function () {
              window.markers = document.querySelectorAll('a-marker')

                let marker1 = document.getElementById('Thermoplast')
                let marker2 = document.getElementById('Elastomer')
                let marker3 = document.getElementById('Duroplast')
                let marker4 = document.getElementById('hiro')

                let objects1 = []
                let objects2 = []
                let objects3 = []
                let objects4 = []

                window.objectsLoaded = 0
                window.pointerCount = 0

                objects1[0] = document.querySelector('#model11')
                objects1[1] = document.querySelector('#model12')
                objects1[2] = document.querySelector('#model13')
                objects1[3] = document.querySelector('#model14')
                objects1[4] = document.querySelector('#model15')

                objects2[0] = document.querySelector('#model21')
                objects2[1] = document.querySelector('#model22')
                objects2[2] = document.querySelector('#model23')
                objects2[3] = document.querySelector('#model24')
                objects2[4] = document.querySelector('#model25')

                objects3[0] = document.querySelector('#model31')
                objects3[1] = document.querySelector('#model32')
                objects3[2] = document.querySelector('#model33')
                objects3[3] = document.querySelector('#model34')
                objects3[4] = document.querySelector('#model35')

                objects4[0] = document.querySelector('#model41')
                objects4[1] = document.querySelector('#model42')
                objects4[2] = document.querySelector('#model43')
                objects4[3] = document.querySelector('#model44')
                objects4[4] = document.querySelector('#model45')

                for(var i = 0; i<objects1.length; i++){
                  objects1[i].addEventListener('model-loaded',()=>{
                    window.objectsLoaded++
                    // document.getElementById('version').innerHTML = window.objectsLoaded
                  })
                  objects2[i].addEventListener('model-loaded',()=>{
                    window.objectsLoaded++
                    // document.getElementById('version').innerHTML = window.objectsLoaded
                  })
                  objects3[i].addEventListener('model-loaded',()=>{
                    window.objectsLoaded++
                    // document.getElementById('version').innerHTML = window.objectsLoaded
                  })
                  objects4[i].addEventListener('model-loaded',()=>{
                    window.objectsLoaded++
                    // document.getElementById('version').innerHTML = window.objectsLoaded
                  })
                  objects1[i].setAttribute('marker','Thermoplast')
                  objects2[i].setAttribute('marker','Elastomer')
                  objects3[i].setAttribute('marker','Duroplast')
                  objects4[i].setAttribute('marker','hiro')

                  if(i!=0) objects1[i].object3D.visible = false
                  if(i!=0) objects2[i].object3D.visible = false
                  if(i!=0) objects3[i].object3D.visible = false
                  if(i!=0) objects4[i].object3D.visible = false

                  // if(i!=0) objects1[i].object3D.scale.set(0,0,0)
                  // if(i!=0) objects2[i].object3D.scale.set(0,0,0)
                  // if(i!=0) objects3[i].object3D.scale.set(0,0,0)
                }

                marker1.setAttribute('found','false')
                marker2.setAttribute('found','false')
                marker3.setAttribute('found','false')    
                marker4.setAttribute('found','false')    

                marker1.setAttribute('state','0')
                marker2.setAttribute('state','0')
                marker3.setAttribute('state','0')
                marker4.setAttribute('state','0')
                
                window.currentObjMarker1 = objects1[0]
                window.currentObjMarker2 = objects2[0]
                window.currentObjMarker3 = objects3[0]
                window.currentObjMarker4 = objects4[0]

                window.currentMarker = null
                window.currentObject = null
                      
                let rotX = 0.0
                let rotY = 0.0
                let oldX = 0.0
                let oldY = 0.0
                let diffX = 0.0
                let diffY = 0.0
                let rotate = false
                let allowZoom = false
                let pinch = true

                let cam = document.getElementById('cam')

                let button = document.getElementById('button')
                let name = document.getElementById('name')
                let legendButton = document.getElementById('legendButton')
                let reloadButton = document.getElementById('reloadButton')

                let foundMarkers = new Map()

                // document.getElementById('legende').style.visibility = 'hidden'

                let test = false
                let deltaS = 0.0
                let oldScale = 0.0

                let blendInThreshold = 3.0
                let blendOutThreshold = 0.8
                let zoomInThreshold = 5.5
                let zoomOutThreshold = 0.5

                var hammertime = new Hammer(document.body)

                hammertime.get('pan').set({ threshold: 0 })
                hammertime.get('pinch').set({ enable: true })

                for (var i = 0; i < window.markers.length; i++) {
                  window.markers[i].addEventListener('markerFound', (e)=>{
                    // console.log('marker found',e.target.id)
                    name.innerHTML=e.target.id
                    name.style.opacity = 1.0
                    button.style.visibility ="hidden"

                    if(!foundMarkers.has(e.target.id))foundMarkers.set(e.target.id, document.getElementById(e.target.id))

                    document.getElementById(e.target.id).setAttribute('found','true')
                    allowZoom = true
                  })
                  window.markers[i].addEventListener('markerLost', (e)=>{
                    // console.log('marker lost',e.target.id)
                    if(foundMarkers.has(e.target.id))foundMarkers.delete(e.target.id)
                    if(foundMarkers.size<1){
                      button.style.visibility = "visible"
                      name.style.opacity = 0.0
                      allowZoom = false
                      legendeNudel.style.visibility = 'hidden'
                    }
                    document.getElementById(e.target.id).setAttribute('found','false')
                    if(e.target.id=="Thermoplast")legendeThermoplast.style.visibility = 'hidden'
                    if(e.target.id=="Elastomer")legendeElastomer.style.visibility = 'hidden'
                    if(e.target.id=="Duroplast")legendeDuroplast.style.visibility = 'hidden'
                    if(e.target.id=="hiro")legendeHiro.style.visibility = 'hidden'
                  })
                }

                hammertime.on('pinch', function(ev) {
                  if(allowZoom){
                    // rotate = false
                    let cScale = window.currentObject.object3D.scale
                    // document.getElementById('version').innerHTML = cScale.x
                    let deltaS = ev.scale-oldScale
                    if(oldScale !=0.0){
                      if(window.currentObject!=null && pinch == true && cScale.x+deltaS>zoomOutThreshold-0.1 && cScale.x+deltaS < zoomInThreshold+0.1){
                          window.currentObject.object3D.scale.set(cScale.x+deltaS, cScale.y+deltaS, cScale.z+deltaS)
                      }
                    }

                    if(window.currentObject.object3D.scale.x>zoomInThreshold && pinch == true && window.currentMarker.getAttribute('state')!='4'){
                      if(window.currentMarker!=null){
                        pinch = false
                        let cState = parseInt(window.currentMarker.getAttribute('state'))
                        cState++
                        if(cState>4)cState=4
                        window.currentMarker.setAttribute('state',cState.toString())
                        if(window.currentObject!=null)window.currentObject.object3D.scale.set(4,4,4)
                        switchObjectsState()
                      }

                    }
                    if(window.currentObject.object3D.scale.x<zoomOutThreshold && pinch == true && window.currentMarker.getAttribute('state')!='0'){
                      if(window.currentMarker!=null){
                          pinch = false
                        let cState = parseInt(window.currentMarker.getAttribute('state'))
                        cState--
                        if(cState<0)cState=0
                        window.currentMarker.setAttribute('state',cState.toString())
                        if(window.currentObject!=null )window.currentObject.object3D.scale.set(1,1,1)
                        switchObjectsState()
                      }
                    }
                    oldScale = ev.scale
                  }
                })

                hammertime.on('pinchstart', function(ev) {
                  console.log('PINCH START')
                //   if(window.currentObject!=null)window.currentObject.object3D.scale.set(1,1,1)
                  // rotate = false
                })

                hammertime.on('pinchend', function(ev) {
                    oldScale = 0.0
                    pinch = true
          /*         if(window.currentObject!=null)window.currentObject.object3D.scale.set(1,1,1)
                  
                    // console.log('pinch END detected',ev.additionalEvent)
                  if(ev.additionalEvent=='pinchout'){
                    // console.log('pinch OUT detected')
                    if(window.currentMarker!=null){
                      let cState = parseInt(window.currentMarker.getAttribute('state'))
                      cState++
                      if(cState>4)cState=4
                      window.currentMarker.setAttribute('state',cState.toString())
                    }
                  }

                  if(ev.additionalEvent=='pinchin'){
                    if(window.currentMarker!=null){
                      let cState = parseInt(window.currentMarker.getAttribute('state'))
                      cState--
                      if(cState<0)cState=0
                      window.currentMarker.setAttribute('state',cState.toString())
                    }
                  }
                  switchObjectsState() */

                //   switchObjectsState()
                })

                function switchObjectsState(){
                  if(marker1.getAttribute('found')){
                    let cState = parseInt(marker1.getAttribute('state'))
                    if(cState!=1)legendeNudel.style.visibility='hidden'
                    if(cState<2)legendeThermoplast.style.visibility='hidden'
                    for(var i=0; i<objects1.length; i++){
                      if(i!=cState)objects1[i].object3D.visible =false
                      if(i==cState){
                        objects1[i].object3D.visible =true
                        window.currentObjMarker1 = objects1[i]
                      }
                    }
                  } 
                  if(marker2.getAttribute('found')){        
                    let cState = parseInt(marker2.getAttribute('state'))
                    if(cState!=1)legendeNudel.style.visibility='hidden'
                    if(cState<2)legendeElastomer.style.visibility='hidden'
                    for(var i=0; i<objects2.length; i++){
                      if(i!=cState)objects2[i].object3D.visible =false
                      if(i==cState){
                        objects2[i].object3D.visible =true
                        objects2[i].object3D.opacity =0.2
                        window.currentObjMarker2 = objects2[i]
                      }
                    }
                  }
                  if(marker3.getAttribute('found')){
                    let cState = parseInt(marker3.getAttribute('state'))
                    if(cState!=1)legendeNudel.style.visibility='hidden'
                    if(cState<2)legendeDuroplast.style.visibility='hidden'
                    for(var i=0; i<objects3.length; i++){
                      if(i!=cState)objects3[i].object3D.visible =false
                      if(i==cState){
                        objects3[i].object3D.visible =true
                        window.currentObjMarker3 = objects3[i]
                      }
                    }
                  }
                  if(marker4.getAttribute('found')){
                    let cState = parseInt(marker4.getAttribute('state'))
                    if(cState!=1)legendeNudel.style.visibility='hidden'
                    if(cState<2)legendeDuroplast.style.visibility='hidden'
                    for(var i=0; i<objects4.length; i++){
                      if(i!=cState)objects4[i].object3D.visible =false
                      if(i==cState){
                        objects4[i].object3D.visible =true
                        window.currentObjMarker4 = objects4[i]
                      }
                    }
                  }

                }
                document.body.addEventListener('pointerdown',()=>{
                    oldX = 0.0
                    oldY = 0.0
                    // rotate = true
                    window.pointerCount++
                    // cube.object3D.rotation.y += 1.0
                  })
                  document.body.addEventListener('pointerup',()=>{
                    oldX = 0.0
                    oldY = 0.0
                    // rotate = false
                    window.pointerCount--
                  })

                  
                document.body.addEventListener('pointermove',(e)=>{
                                    
                  var vector = new THREE.Vector3()
                  vector.setFromMatrixPosition(window.currentObject.object3D.matrixWorld)
                  vector.project(AFRAME.scenes[0].camera)

                  var width = window.innerWidth, height = window.innerHeight
                  var widthHalf = width / 2, heightHalf = height / 2

                  vector.x = ( vector.x * widthHalf ) + widthHalf
                  vector.y = -( vector.y * heightHalf ) + heightHalf

                    if(window.pointerCount<2){
                      if(oldX!=0)diffX = (oldX-e.clientX)*0.5
                      if(oldY!=0)diffY = (oldY-e.clientY)*0.5
                      rotX+=diffX*-1
                      rotY+=diffY*-1
                      if(window.currentObject !=null && Math.abs(diffX)<60 && Math.abs(diffY)<60){
                        // console.log('rotation difference',diff)
                       /*  window.currentObject.object3D.rotation.set(
                        THREE.Math.degToRad(0),
                        // THREE.Math.degToRad(window.currentObject.object3D.rotation._x+rotY),
                        THREE.Math.degToRad(window.currentObject.object3D.rotation._y+rotX),
                        THREE.Math.degToRad(0)
                        ) */
                        // select the Z world axis
                        var xAxis = new THREE.Vector3(1, 0, 0)
                        var yAxis = new THREE.Vector3(0, 1, 0)
                        var zAxis = new THREE.Vector3(0, 0, 1)

                        // rotate the mesh 45 on this axis
                        // window.currentObject.rotateOnWorldAxis(this.myAxis, THREE.Math.degToRad(diffX*-1))
                        if(vector.y>e.clientY)window.currentObject.object3D.rotateOnWorldAxis ( yAxis, THREE.Math.degToRad(diffX) )
                        if(vector.y<=e.clientY)window.currentObject.object3D.rotateOnWorldAxis ( yAxis, THREE.Math.degToRad(diffX*-1) )
                        // window.currentObject.object3D.rotateOnWorldAxis ( xAxis, THREE.Math.degToRad(diffY*-1) )
                        // window.currentObject.object3D.rotateX( diffY*0.01 )
                      }
                      oldX = e.clientX
                      oldY = e.clientY
                    }
                  })

                  legendButton.addEventListener('click',(e)=>{
                    
              window.location.href = "test.html";
                    var legends = document.querySelectorAll(".uiElement")
                  // console.log(legends[0].getAttribute('marker'), currentMarker.id)
                    if(window.currentMarker!=null){
                      if(parseInt(window.currentMarker.getAttribute('state'))==1){
                      switch(legendeNudel.style.visibility){
                          case 'visible':
                              // if(parseInt(window.currentMarker.getAttribute('state'))==1)legendeNudel.style.visibility = 'visible'
                              // if(parseInt(window.currentMarker.getAttribute('state'))!=1)legendeNudel.style.visibility = 'hidden'
                              legendeNudel.style.visibility = 'hidden'
                            break
                          case 'hidden':
                              // if(parseInt(window.currentMarker.getAttribute('state'))==1)legendeNudel.style.visibility = 'visible'
                              // if(parseInt(window.currentMarker.getAttribute('state'))!=1)legendeNudel.style.visibility = 'hidden'
                              legendeNudel.style.visibility = 'visible'
                            break
                      }
                      }
                      for(var i=0; i<legends.length; i++){
                        if(legends[i].getAttribute('marker')==window.currentMarker.id && parseInt(window.currentMarker.getAttribute('state'))>1){
                          switch(legends[i].style.visibility){
                          case 'visible':
                            legends[i].style.visibility = 'hidden'
                            break
                          case 'hidden':
                            legends[i].style.visibility = 'visible'
                            break
                        }
                        }
                      }
                    }
                  })    
                  
                  document.getElementById('reloadButton').addEventListener('click',(e)=>{
                    location.reload()
                  })
            },
            tick: function () {
              let marker1 = document.getElementById('Thermoplast')
              let marker2 = document.getElementById('Elastomer')
              let marker3 = document.getElementById('Duroplast')
              let marker4 = document.getElementById('hiro')
              let name = document.getElementById('name')
              // console.log(window.pointerCount)
              document.getElementById('loading').innerHTML = "Lade Modelle " + window.objectsLoaded + " / 20"
              if(window.objectsLoaded == 20){
                
                document.getElementById('overlay').style.visibility = "hidden"
              }

              if(window.markers!=null){
              let result = null
              let distances = []

              let distM1=999.0
              let distM2=999.0
              let distM3=999.0
              let distM4=999.0

              distances[0]=distM1
              distances[1]=distM2
              distances[2]=distM3
              distances[3]=distM4

              for (var i = 0; i < window.markers.length; i++) {
                if(window.markers[i].id=="Thermoplast" && window.markers[i].getAttribute('found')=='true'){
                  // result=marker1
                  distM1 =  this.distanceVector(marker1.object3D.getWorldPosition(new THREE.Vector3()),AFRAME.scenes[0].camera.getWorldPosition(new THREE.Vector3()))
                  distances[0]=distM1
                }
                if(window.markers[i].id=="Elastomer" && window.markers[i].getAttribute('found')=='true'){
                    distM2 =  this.distanceVector(marker2.object3D.getWorldPosition(new THREE.Vector3()),AFRAME.scenes[0].camera.getWorldPosition(new THREE.Vector3()))
                    distances[1]=distM2
                  }
                if(window.markers[i].id=="Duroplast" && window.markers[i].getAttribute('found')=='true'){
                  distM3 =  this.distanceVector(marker3.object3D.getWorldPosition(new THREE.Vector3()),AFRAME.scenes[0].camera.getWorldPosition(new THREE.Vector3()))
                  distances[2]=distM3
                }
                if(window.markers[i].id=="hiro" && window.markers[i].getAttribute('found')=='true'){
                  distM4 =  this.distanceVector(marker4.object3D.getWorldPosition(new THREE.Vector3()),AFRAME.scenes[0].camera.getWorldPosition(new THREE.Vector3()))
                 distances[3]=distM4
                }
              }
              
              let minDist =this.minimumArray(distances)

              if(minDist == distM2){
                result = marker2
                name.innerHTML = marker2.id
                name.style.opacity = 1.0
                window.currentObject = window.currentObjMarker2
              }
              if(minDist == distM3){
                result = marker3
                name.innerHTML = marker3.id
                name.style.opacity = 1.0
                window.currentObject = window.currentObjMarker3
              }
              if(minDist == distM1){
                result = marker1
                name.innerHTML = marker1.id
                name.style.opacity = 1.0
                window.currentObject = window.currentObjMarker1
              }
              if(minDist == distM4){
                console.log('minDist = Marker4')
                result = marker4
                name.innerHTML = marker4.id
                name.style.opacity = 1.0
                window.currentObject = window.currentObjMarker4
              }
              if(distM3 == distM1 == distM2 == distM4) result = null
              window.currentMarker = result
              }
            },
            distanceVector: (function (v1,v2){
              // console.log(v1)
              var dx = v1.x - v2.x
              var dy = v1.y - v2.y
              var dz = v1.z - v2.z

              return Math.sqrt( dx * dx + dy * dy + dz * dz )
            }),
            minimumArray: (function (array){
              let min = 666.0
              for (var i=0; i<array.length; i++){
                if(array[i]<min)min=array[i]
              }

              return min
            }),
          })
        </script>
      
      <a-scene renderer="logarithmicDepthBuffer: true;" embedded arjs='debugUIEnabled: false; patternRatio: 0.5' vr-mode-ui='enabled: false' set-marker >
        <a-marker id = "Thermoplast" cursor-listener type="pattern" url="./assets/marker/pattern-bottle.patt">
         <!-- <a-entity id="model11" obj-model="obj: url(./models/Duroplast.obj); mtl: url(./models/Duroplast.mtl)" ></a-entity> -->
         <a-gltf-model id="model11" src="assets/models/bottle.gltf"></a-gltf-model>
         <a-gltf-model id="model12" src="assets/models/Thermoplast_Nudel.glb"></a-gltf-model>
         <!-- <a-box id="model13" position='0 0.5 0' height="1.5" width="1.0" material='color: lime;' transparent= "true" opacity= "0.5" clicking=""></a-box>
         <a-box id="model14" position='0 0.5 0' height="1.5" width="1.0" material='color: pink;' transparent= "true" opacity= "0.5"  clicking=""></a-box>
         <a-box id="model15" position='0 0.5 0' height="1.5" width="1.0" material='color: red;' transparent= "true" opacity= "0.5"  clicking=""></a-box> -->
         <a-gltf-model id="model13" src="assets/models/Thermoplast_Sphere_black.glb"></a-gltf-model>
         <a-gltf-model id="model14" src="assets/models/Thermoplast_Ball_black.glb"></a-gltf-model>
         <a-gltf-model id="model15" src="assets/models/Thermoplast_Stick_black.glb"></a-gltf-model>
       </a-marker>
 
       <a-marker id = "Elastomer" cursor-listener type="pattern" url="./assets/marker/pattern-rubber.patt">
         <a-gltf-model id="model21" src="assets/models/rubber.gltf"></a-gltf-model>
         <a-gltf-model id="model22" src="assets/models/Elastomer_Nudel.glb"></a-gltf-model>
         <!-- <a-box id="model23" position='0 0.5 0' height="1.5" width="1.0" material='color: lime;' transparent= "true" opacity= "0.5" clicking=""></a-box>
         <a-box id="model24" position='0 0.5 0' height="1.5" width="1.0" material='color: pink;' transparent= "true" opacity= "0.5"  clicking=""></a-box>
         <a-box id="model25" position='0 0.5 0' height="1.5" width="1.0" material='color: red;' transparent= "true" opacity= "0.5"  clicking=""></a-box> -->
         <a-gltf-model id="model23" src="assets/models/Elastomer_Sphere_black.glb"></a-gltf-model>
         <a-gltf-model id="model24" src="assets/models/Elastomer_Ball_black.glb"></a-gltf-model>
         <a-gltf-model id="model25" src="assets/models/Elastomer_Stick_black.glb"></a-gltf-model>
       </a-marker>
 
       <a-marker id = "Duroplast" type="pattern" url="./assets/marker/pattern-steckdose.patt">
         <a-gltf-model id="model31" src="assets/models/socket2.gltf"></a-gltf-model>
         <a-gltf-model id="model32" src="assets/models/Duroplast_Nudel.glb"></a-gltf-model>
         <!-- <a-box id="model33" position='0 0.5 0' height="1.5" width="1.0" material='color: lime;' transparent= "true" opacity= "0.5" clicking=""></a-box>
         <a-box id="model34" position='0 0.5 0' height="1.5" width="1.0" material='color: pink;' transparent= "true" opacity= "0.5"  clicking=""></a-box>
         <a-box id="model35" position='0 0.5 0' height="1.5" width="1.0" material='color: red;' transparent= "true" opacity= "0.5"  clicking=""></a-box> -->
         <a-gltf-model id="model33" src="assets/models/Duroplast_Sphere_black.glb"></a-gltf-model>
         <a-gltf-model id="model34" src="assets/models/Duroplast_Ball_black.glb"></a-gltf-model>
         <a-gltf-model id="model35" src="assets/models/Duroplast_Stick_black.glb"></a-gltf-model>
       </a-marker>
 
       <a-marker id="hiro" preset="hiro">
         <a-gltf-model id="model41" src="assets/models/socket2.gltf"></a-gltf-model>
         <a-gltf-model id="model42" src="assets/models/Duroplast_Nudel.glb"></a-gltf-model>
         <!-- <a-box id="model33" position='0 0.5 0' height="1.5" width="1.0" material='color: lime;' transparent= "true" opacity= "0.5" clicking=""></a-box>
         <a-box id="model34" position='0 0.5 0' height="1.5" width="1.0" material='color: pink;' transparent= "true" opacity= "0.5"  clicking=""></a-box>
         <a-box id="model35" position='0 0.5 0' height="1.5" width="1.0" material='color: red;' transparent= "true" opacity= "0.5"  clicking=""></a-box> -->
         <a-gltf-model id="model43" src="assets/models/Duroplast_Sphere_black.glb"></a-gltf-model>
         <a-gltf-model id="model44" src="assets/models/Duroplast_Ball_black.glb"></a-gltf-model>
         <a-gltf-model id="model45" src="assets/models/Duroplast_Stick_black.glb"></a-gltf-model>
       </a-marker>
 
       <a-entity id="cam" camera >
       </a-entity>
     </a-scene>
    <div id = "header" style="position: absolute; top: 0px; left: 0px; display: flex; flex-direction: row;">
      <div id="name" class="uiElement" style="margin: 5px; padding: 5px; opacity: 0;"></div>
    </div>

    <div id = "toolbar" style="position: absolute; bottom: 0px; left: 0px; display: flex;flex-direction: row;">
      <div id="legendButton" class="button" style="margin: 5px; padding: 5px; opacity: 1;">Legende</div>
      <!-- <div id="homeButton" class="button" style="margin: 5px; padding: 5px;">Startseite</div> -->
      <img id="reloadButton" class="button" style="margin: 5px; padding: 5px; height: 5vh; width: 5vh; visibility: hidden;" src="./assets/icons/refresh.png"><!-- Neu laden</div> -->
      <div id="version" class="button" style="margin: 5px; padding: 5px; visibility: hidden;">zoomable</div>
    </div>

    <div id="button" class="uiElement" style="position: absolute; top: 15%; left: 20%; visibility: visible;">
      <div id="buttonInfo" style="margin: 10px; color: white">Bitte Marker Scannen</div>
      <div id="buttonClickable" class= "innerButton" style="margin: 10px; width: 90%; height: 0vh; visibility: hidden; border-radius: 5px; ">      
        <div id="buttonAction" style="margin: 10px; padding: 5px; text-align: center; color:white"></div>
      </div>

    </div>

    <div id="legendeNudel" class="uiElement" style="position: absolute; top: 10%; left: 5%; display: flex; flex-direction: column; opacity: 0.8; visibility: hidden;">
      <div id="Verknuepfung" style="display: flex; flex-direction: row; margin: 1vh;">
        <div style="width: 2vh; height: 2vh; background: grey; border-radius: 50%; margin: 5px;" ></div>
        <div id="VerknuepfungInfo"> = Verknuepfung</div>
      </div>
    </div>

    <div id="legendeThermoplast" class="uiElement" marker="Thermoplast" style="position: absolute; top: 10%; left: 5%; display: flex; flex-direction: column; opacity: 0.8; visibility: hidden;">
      <div id="kohlenstoff" style="display: flex; flex-direction: row; margin: 1vh;">
        <div style="width: 2vh; height: 2vh; background: darkgray; border-radius: 50%; margin: 5px;" ></div>
        <div id="kohlenstoffInfo"> = Kohlenstoff</div>
      </div>
      <div id="sauerstoff" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: red; border-radius: 50%; margin: 5px;" ></div>
          <div id="sauerstoffInfo"> = Sauerstoff</div>
      </div>
      <div id="wasserstoff" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: white; border-radius: 50%; margin: 5px;" ></div>
          <div id="wasserstoffInfo"> = Wasserstoff</div>
      </div>
    </div>

    </div> 
    <div id="legendeElastomer" class="uiElement" marker="Elastomer" style="position: absolute; top: 10%; left: 5%; display: flex; flex-direction: column; opacity: 0.8; visibility: hidden;">
      <div id="kohlenstoff" style="display: flex; flex-direction: row; margin: 1vh;">
        <div style="width: 2vh; height: 2vh; background: darkgray; border-radius: 50%; margin: 5px;" ></div>
        <div id="kohlenstoffInfo"> = Kohlenstoff</div>
      </div>
      <div id="schwefel" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: yellow; border-radius: 50%; margin: 5px;" ></div>
          <div id="schwefelInfo"> = Schwefel</div>
      </div>
      <div id="wasserstoff" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: white; border-radius: 50%; margin: 5px;" ></div>
          <div id="wasserstoffInfo"> = Wasserstoff</div>
      </div>
    </div>
    </div>

    <div id="legendeDuroplast" class="uiElement" marker="Duroplast" style="position: absolute; top: 10%; left: 5%; display: flex; flex-direction: column; opacity: 0.8; visibility: hidden;">
      <div id="kohlenstoff" style="display: flex; flex-direction: row; margin: 1vh;">
        <div style="width: 2vh; height: 2vh; background: darkgray; border-radius: 50%; margin: 5px;" ></div>
        <div id="kohlenstoffInfo"> = Kohlenstoff</div>
      </div>
      <div id="sauerstoff" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: red; border-radius: 50%; margin: 5px;" ></div>
          <div id="sauerstoffInfo"> = Sauerstoff</div>
      </div>
      <div id="stickstoff" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: blue; border-radius: 50%; margin: 5px;" ></div>
          <div id="stickstoffInfo"> = Stickstoff</div>
      </div>
      <div id="wasserstoff" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: white; border-radius: 50%; margin: 5px;" ></div>
          <div id="wasserstoffInfo"> = Wasserstoff</div>
      </div>
    </div>

    <div id="legendeHiro" class="uiElement" marker="Duroplast" style="position: absolute; top: 10%; left: 5%; display: flex; flex-direction: column; opacity: 0.8; visibility: hidden;">
      <div id="kohlenstoff" style="display: flex; flex-direction: row; margin: 1vh;">
        <div style="width: 2vh; height: 2vh; background: darkgray; border-radius: 50%; margin: 5px;" ></div>
        <div id="kohlenstoffInfo"> = Kohlenstoff</div>
      </div>
      <div id="sauerstoff" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: red; border-radius: 50%; margin: 5px;" ></div>
          <div id="sauerstoffInfo"> = Sauerstoff</div>
      </div>
      <div id="stickstoff" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: blue; border-radius: 50%; margin: 5px;" ></div>
          <div id="stickstoffInfo"> = Stickstoff</div>
      </div>
      <div id="wasserstoff" style="display: flex; flex-direction: row; margin: 1vh;">
          <div style="width: 2vh; height: 2vh; background: white; border-radius: 50%; margin: 5px;" ></div>
          <div id="wasserstoffInfo"> = Wasserstoff</div>
      </div>
    </div>

    <div id = "overlay" style = "position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; background: rgb(255, 105, 0);">
      <div id = "loading" class = "uiElement" style="position: absolute; left: 5%; top: 50%; font-size: 8vw;"></div>
    </div>

  </body>
  <script>
  </script>
</html>